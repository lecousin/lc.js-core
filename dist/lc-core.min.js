String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),Array.prototype.contains=function(e){return-1!=this.indexOf(e)},Array.prototype.remove=function(e){for(var t=0;t<this.length;++t)this[t]==e&&(this.splice(t,1),t--)},Array.prototype.removeUnique=function(e){var t=this.indexOf(e);0<=t&&this.splice(t,1)},Array.prototype.isSame=function(e){if(!Array.isArray(e))return!1;if(this.length!=e.length)return!1;for(var t=0;t<this.length;++t)if(this[t]!==e[t])return!1;return!0},Array.prototype.clear=function(){0<this.length&&this.splice(0,this.length)},Array.prototype.removeElements=function(e){for(var t=0;t<this.length;++t)e.contains(this[t])&&(this.splice(t,1),t--)},"undefined"==typeof lc&&(lc={}),lc.core={namespace:function(e,t){for(var s=e.split("."),n=window,r=0;r<s.length;++r)void 0===n[s[r]]&&(n[s[r]]={}),n=n[s[r]];return lc.core.merge(n,t)},merge:function(e,t){for(var s in t)e[s]=t[s];return e},createClass:function(e,t,s){for(var n=e.split("."),r=window,o=0;o<n.length-1;++o)void 0===r[n[o]]&&(r[n[o]]={}),r=r[n[o]];var c=n[n.length-1];return r[c]=t,r[c].prototype=s,r[c].prototype.constructor=t,r[c]._lcClass=e,r[c]._lcExtends=[],parent[c]},extendClass:function(e,t,s,n){for(var r=e.split("."),o=window,c=0;c<r.length-1;++c)void 0===o[r[c]]&&(o[r[c]]={}),o=o[r[c]];var l=r[r.length-1];o[l]=s,o[l]._lcClass=e,o[l]._lcExtends=[],Array.isArray(t)||(t=[t]);var i={};for(c=0;c<t.length;++c)if(lc.core.merge(i,t[c].prototype),o[l]._lcExtends.indexOf(t[c])<0&&o[l]._lcExtends.push(t[c]._lcClass),t[c]._lcExtends)for(var a=0;a<t[c]._lcExtends.length;++a)o[l]._lcExtends.indexOf(t[c]._lcExtends[a])<0&&o[l]._lcExtends.push(t[c]._lcExtends[a]);return o[l].prototype=lc.core.merge(n,i),o[l].prototype.constructor=s,o[l]},instanceOf:function(e,t){if("string"==typeof t&&(t=window[t]),e instanceof t)return!0;if(!e.constructor._lcExtends)return!1;for(var s=0;s<e.constructor._lcExtends.length;++s)if(window[e.constructor._lcExtends[s]]==t||lc.core.isExtending(e.constructor._lcExtends[s],t))return!0;return!1},isExtending:function(e,t){if("string"==typeof e&&(e=window[e]),"string"==typeof t&&(t=window[t]),!e._lcExtends)return!1;for(var s=0;s<e._lcExtends.length;++s)if(window[e._lcExtends[s]]==t||lc.isExtending(e._lcExtends[s],t))return!0;return!1},typeOf:function(e){if(null===e)return"null";if("object"!=typeof e)return typeof e;if(e.constructor._lcClass)return e.constructor._lcClass;var t=e.constructor;if(t){if(t.name)return t.name;if(t.displayName)return t.displayName}return"[unknown]"},_idCounter:0,generateId:function(){return"id"+ ++lc.core._idCounter},getMyURL:function(){var t;try{toto.tutu()}catch(e){t=e.stack.split("\n")}for(var e=!0,s=0;s<t.length;++s)if(t[s].match(/http[s]?:\/\//)){if(!e){var n=t[s].match(/((http[s]?:\/\/.+\/)([^\/]+\.js)):/);return new lc.URL(n[1])}e=!1}return null}},lc.core.namespace("lc.app",{_expectedExpressions:{},_applicationListeners:[],onDefined:function(expression,listener){var value=eval("("+expression+")");void 0!==value&&lc.core._loaded?lc.async.Callback.callListeners(listener):(void 0===lc.app._expectedExpressions[expression]&&(lc.app._expectedExpressions[expression]=[]),lc.app._expectedExpressions[expression].push(listener))},newDefinitionsAvailable:function(){for(var expression in lc.app._expectedExpressions){var value=eval("("+expression+")");void 0!==value&&(lc.async.Callback.callListeners(lc.app._expectedExpressions[expression]),delete lc.app._expectedExpressions[expression])}},onLoaded:function(e){null===lc.app._applicationListeners?lc.async.Callback.callListeners(e):lc.app._applicationListeners.push(e)},loaded:function(){for(var e in lc.app.newDefinitionsAvailable(),lc.async.Callback.callListeners(lc.app._applicationListeners),lc.app._applicationListeners=null,lc.app.newDefinitionsAvailable(),lc.app._expectedExpressions)lc.log.warn("lc.app","Application loaded but still waiting for: "+e)}}),lc.core.namespace("lc.ajax",{create:function(e,t){t instanceof lc.URL&&(t=t.toString());var s=new XMLHttpRequest;return s.open(e,t,!0),s.future=new lc.async.Future,s.onreadystatechange=function(){4==this.readyState&&this.future.success(this)},s},get:function(e,t){var s=lc.ajax.create("GET",e);t&&s.setRequestHeader("Accept",t),s.send();var n=new lc.async.Future;return s.future.onsuccess(function(e){200==e.status?n.success(e.responseText):n.error(e.status)}),n},customize:function(e){}}),window._lc_ajax_XMLHttpRequest_send=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=function(e){lc.ajax.customize(this),window._lc_ajax_XMLHttpRequest_send.apply(this,[e])},lc.core.createClass("lc.async.Callback",function(e,t,s){this._this=e,this._fct=t,this._args=s},{call:function(){for(var e=[],t=0;t<arguments.length;++t)e.push(arguments[t]);return this._args&&(e=this._args.concat(e)),this._fct.apply(this._this,e)},apply:function(e){var t=[];if(e)for(var s=0;s<e.length;++s)t.push(e[s]);return this._args&&(t=this._args.concat(t)),this._fct.apply(this._this,t)},toFunction:function(){var e=this;return function(){return e.apply(arguments)}}}),lc.async.Callback.callListeners=function(t,e){Array.isArray(t)||(t=[t]),void 0===e&&(e=[]);for(var s=0;s<t.length;++s)try{if("function"==typeof t[s])t[s](e);else{if(!lc.core.instanceOf(t[s],lc.async.Callback))throw"Unexpected listener type: "+lc.core.typeOf(t[s]);t[s].apply(e)}}catch(e){lc.log.error("lc.async.Callback","A listener thrown an exception: "+t[s]+": "+e)}},lc.async.Callback.from=function(e){if("function"==typeof listeners[i])return new lc.async.Callback(window,e);if(lc.core.instanceOf(e,lc.async.Callback))return e;throw"Unexpected type: "+lc.core.typeOf(e)},lc.core.createClass("lc.async.Future",function(){this._successListeners=[],this._errorListeners=[],this._doneListeners=[]},{_done:!1,_result:void 0,_error:void 0,_successListeners:null,_errorListeners:null,_doneListeners:null,success:function(e){if(this._done)throw"Future already done";this._result=e,this._done=!0,this._callListeners()},error:function(e){if(this._done)throw"Future already done";this._error=e,this._done=!0,this._callListeners()},ondone:function(e){return this._done?lc.async.Callback.callListeners([e],[]):this._doneListeners.push(e),this},onsucess:function(t){return lc.core.instanceOf(t,lc.async.Future)?onsuccess(function(e){t.success(e)}):(this._done?void 0===this._error&&lc.async.Callback.callListeners([t],[this._result]):this._successListeners.push(t),this)},onerror:function(t){return lc.core.instanceOf(t,lc.async.Future)?onerror(function(e){t.error(e)}):(this._done?null!=this._error&&lc.async.Callback.callListeners([t],[this._error]):this._errorListeners.push(t),this)},isDone:function(){return this._done},getResult:function(){return this._result},getError:function(){return this._error},_callListeners:function(){void 0===this._error?lc.async.Callback.callListeners(this._successListeners,[this._result]):lc.async.Callback.callListeners(this._errorListeners,[this._error]),lc.async.Callback.callListeners(this._doneListeners,[]),this._doneListeners=null,this._successListeners=null,this._errorListeners=null}}),lc.core.extendClass("lc.async.JoinPoint",lc.async.Future,function(){lc.async.Future.call(this),this._remaining=0,this._started=!1},{addToJoin:function(e){if("number"==typeof e)this._remaining+=e;else{if(!lc.core.instanceOf(e,lc.async.Future))throw"Unexpected type to join: "+lc.Core.typeOf(e);this._remaining++,e.onsuccess(new lc.async.Callback(this,this.join)).onerror(new lc.async.Callback(this,this.error))}},start:function(){this._started=!0,this._check()},join:function(){if(this._remaining<=0)throw"JoinPoint: no more join expected";this._remaining--,this._started&&this._check()},_check:function(){this._done||this._remaining<=0&&this.success(null)}}),lc.core.createClass("lc.Cache",function(e,t,s){if(this._timeout=e,this._onrelease=t,0<e){s<=0&&(s=3e4);var n=this;this._interval=setInterval(function(){n._checkTimeout()},s)}},{_items:new Map,set:function(e,t){var s=this._items.get(e);s&&this._onrelease&&this._onrelease(e,s.item),this._items.set(e,{item:t,used:(new Date).getTime()})},get:function(e){var t=this._items.get(e);if(t)return t.used=(new Date).getTime(),t.item},remove:function(e){var t=this._items.get(e);return!!t&&(this._onrelease&&this._onrelease(e,t.item),this._items.delete(e),!0)},close:function(){this._interval&&(clearInterval(this._interval),this._interval=null),this._items=null},_checkTimeout:function(){var n=(new Date).getTime()-this._timeout,r=this._onrelease;this._items.forEach(function(e,t,s){e.used<n&&(r&&r(t,e.item),s.delete(t))})}}),lc.core.namespace("lc.cookies",{get:function(e){return document.cookie.replace(new RegExp("(?:(?:^|.*;s*)"+e+"s*=s*([^;]*).*$)|^.*$"),"$1")},set:function(e,t,s,n){var r=e+"="+t;s&&(r+=";path="+s),n&&(r+=";max-age="+n),document.cookie=r}}),lc.core.namespace("lc.css",{hasClass:function(e,t){return e.className.split(" ").contains(t)},addClass:function(e,t){""!=e.className?e.className.split(" ").contains(t)||(e.className+=" "+t):e.className=t},removeClass:function(e,t){if(""!=e.className)if(e.className!=t){var s=e.className.split(" ");s.contains(t)&&(s.remove(t),e.className=s.join(" "))}else e.className=""},getClasses:function(e){return e.className.split(" ")}}),lc.core.namespace("lc.events",{_customEvents:{destroy:function(e,t){}},registerCustomEvent:function(e,t){t||(t=function(e,t){}),void 0===lc.events._customEvents[e]&&(lc.events._customEvents[e]=t)},triggerCustomEvent:function(e,t,s){if(e._eventListeners)for(var n=0;n<e._eventListeners.length;++n)e._eventListeners[n].eventType==t&&lc.Callback.callListeners(e._eventListeners[n].listener,s)},listen:function(e,t,s){if(!s)throw"No listener given to lc.events.listen";e._eventListeners||(e._eventListeners=[]),"function"==typeof s&&(s=new lc.Callback(s,e));var n={eventType:t,listener:s};e._eventListeners.push(n),void 0===lc.events._customEvents[t]?(n.listenerFct=n.listener.toFunction(),e.addEventListener(t,n.listenerFct)):lc.events._customEvents[t](e,s)},unlisten:function(e,t,s){if(e._eventListeners)for(var n=0;n<e._eventListeners.length;++n)if(e._eventListeners[n].eventType==t&&(e._eventListeners[n].listener==s||e._eventListeners[n].listener._fct==s)){s=e._eventListeners[n].listenerFct,e._eventListeners[n].listener=null,e._eventListeners.splice(n,1);break}void 0===lc.events._customEvents[t]&&e.removeEventListener(t,s)},destroyed:function(e){if(!e._destroyed){if(e._destroyed=!0,e._eventListeners){var t=e._eventListeners.slice();e._eventListeners=null;for(var s=0;s<t.length;++s)"destroy"===t[s].eventType?lc.Callback.callListeners(t[s].listener):void 0===lc.events._customEvents[t[s].eventType]&&e.removeEventListener(t[s].eventType,t[s].listener._fct),t[s].listener=null}if(e.childNodes)for(s=0;s<e.childNodes.length;++s)lc.events.destroyed(e.childNodes[s])}}}),lc.core.createClass("lc.events.Producer",function(){this.eventsListeners||(this.eventsListeners={},this.listen=this.on)},{registerEvent:function(e){e=e.toLowerCase(),this.eventsListeners[e]=[]},registerEvents:function(e){for(var t=0;t<e.length;++t)this.eventsListeners[e[t].toLowerCase()]=[]},unregisterEvents:function(e){for(var t=0;t<e.length;++t)delete this.eventsListeners[e[t].toLowerCase()]},on:function(e,t){if(e=e.toLowerCase(),void 0===this.eventsListeners[e])throw"Unknown event: "+e;this.eventsListeners[e].push(t)},unlisten:function(e,t){if(e=e.toLowerCase(),void 0===this.eventsListeners[e])throw"Unknown event: "+e;for(var s=0;s<this.eventsListeners[e].length;++s)if(this.eventsListeners[e][s]==t){this.eventsListeners[e].splice(s,1);break}},trigger:function(e,t){if(this.eventsListeners){if(e=e.toLowerCase(),void 0===this.eventsListeners[e])throw"Unknown event: "+e;lc.log.debug("lc.events.Producer",e+" on "+lc.core.typeOf(this)),lc.Callback.callListeners(this.eventsListeners[e],t)}},hasEvent:function(e){return e=e.toLowerCase(),void 0!==this.eventsListeners[e]},destroy:function(){this.eventsListeners=null}}),lc.core.createClass("lc.Extendable",function(){null===this.extensions&&(this.extensions=[],lc.Extension.Registry.detect(this),this.extensions.sort(function(e,t){return t.priority-e.priority}))},{extensions:null,addExtension:function(e){null==this.getExtension(e)&&(e=new e,this.extensions.push(e),e.init(this),this.extensionAdded(e))},extensionAdded:function(e){},removeExtension:function(e){var t=!1;if("function"==typeof e){for(var s=0;s<this.extensions.length;++s)if(lc.core.instanceOf(this.extensions[s],e)){e=this.extensions[s],this.extensions.splice(s,1),t=!0;break}}else for(s=0;s<this.extensions.length;++s)if(this.extensions[s]==e){this.extensions.splice(s,1),t=!0;break}t&&e.destroy(this)},getExtension:function(e){for(var t=0;t<this.extensions.length;++t)if(lc.core.instanceOf(this.extensions[t],e))return this.extensions[t];return null},callExtensions:function(e){if(this.extensions)for(var t=Array.prototype.slice.call(arguments,1),s=0;s<this.extensions.length;++s)if("function"==typeof this.extensions[s][e]&&(this.extensions[s][e].apply(this.extensions[s],t),!this.extensions))return},destroy:function(){if(this.extensions){for(var e=0;e<this.extensions.length;++e)this.extensions[e].destroy(this);this.extensions=null}}}),lc.core.createClass("lc.Extension",function(){},{priority:0,detect:function(e){},init:function(e){},destroy:function(e){}}),lc.Extension.Registry={_extensions:[],register:function(e,t){this._extensions.push({extended:e,extension:t})},detect:function(e){for(var t=0;t<this._extensions.length;++t)lc.core.instanceOf(e,this._extensions[t].extended)&&this._extensions[t].extension.prototype.detect(e)&&e.addExtension(this._extensions[t].extension)}},lc.core.namespace("lc.html",{walkChildren:function(e,t){for(var s=0;s<e.childNodes.length;++s)lc.Callback.from(t).call(e.childNodes[s])||1==e.childNodes[s].nodeType&&lc.html.walkChildren(e.childNodes[s],t)},create:function(e,t){var s=document.createElement(e);if(t)for(var n in t)s[n]=t[n];return s},remove:function(e){lc.events.destroyed(e),e.parentNode&&e.parentNode.removeChild(e)},empty:function(e){for(;0<e.childNodes.length;)lc.html.remove(e.childNodes[0])},addOption:function(e,t,s){var n=document.createElement("OPTION");n.value=t,n.text=s,e.add(n)},insertAfter:function(e,t){return t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e)},escape:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}}),lc.core.namespace("lc.html.processor",{_preprocessors:[],_postprocessors:[],addPreProcessor:function(e,t){t||(t=1e3),lc.html.processor._preprocessors.push({processor:e,priority:t}),lc.html.processor._preprocessors.sort(function(e,t){return t.priority-e.priority})},addPostProcessor:function(e,t){t||(t=1e3),lc.html.processor._postprocessors.push({processor:e,priority:t}),lc.html.processor._postprocessors.sort(function(e,t){return t.priority-e.priority})},removePreProcessor:function(e){for(var t=0;t<lc.html.processor._preprocessors.length;++t)if(lc.html.processor._preprocessors[t].processor===e)return void lc.html.processor._preprocessors.splice(t,1)},removePostProcessor:function(e){for(var t=0;t<lc.html.processor._postprocessors.length;++t)if(lc.html.processor._postprocessors[t].processor===e)return void lc.html.processor._postprocessors.splice(t,1)},removeProcessor:function(e){lc.html.processor.removePreProcessor(e),lc.html.processor.removePostProcessor(e)},STATE_RUNNING:0,STATE_INTERRUPTED:1,STATE_STOPPED:2,process:function(e){var t=new lc.html.processor.Status(e);return t._continueProcessing(),t.result},processContent:function(e){var t=new lc.html.processor.Status(e);return t._elements[0]._preprocessors=[],t._elements[0]._postprocessors=[],t._continueProcessing(),t.result}}),lc.core.createClass("lc.html.processor.Status",function(e){this._elements=[new lc.html.processor.ElementStatus(e,this)],this.result=new lc.async.Future},{interrupt:function(){this._state=lc.html.processor.STATE_INTERRUPTED},stop:function(){this._state=lc.html.processor.STATE_STOPPED},resume:function(){this._state=lc.html.processor.STATE_RUNNING,this._continueProcessing()},_state:lc.html.processor.STATE_RUNNING,_continueProcessing:function(){for(;;){if(this._state==lc.html.processor.STATE_STOPPED){for(;0<this._elements.length;){var e=this._elements[this._elements.length-1];this._elements.splice(this._elements.length-1,1),e.result.success(e)}return void this.result.success(this)}if(0==this._elements.length)return void this.result.success(this);if((e=this._elements[this._elements.length-1])._state==lc.html.processor.STATE_INTERRUPTED)return;if(e._state!=lc.html.processor.STATE_STOPPED)if(e._preprocessors){var t=e._preprocessors[0];e._preprocessors.splice(0,1),lc.async.Callback.callListeners(t.processor,[e.element,e,this])}else{if(void 0===e._children){e._children=[];for(var s=0;s<e.element.childNodes.length;++s)e._children.push(e.element.childNodes[s])}if(e._children){var n=e._children[0];e._children.splice(0,1);var r=new lc.html.processor.ElementStatus(n,this);this._elements.push(r)}else if(void 0===e._postprocessors&&(e._postprocessors=lc.html.processor._postprocessors.splice()),e._postprocessors){t=e._postprocessors[0];e._postprocessors.splice(0,1),lc.async.Callback.callListeners(t.processor,[e.element,e,this])}else e.result.success(e),this._elements.splice(this._elements.length-1,1),lc.events.triggerCustomEvent(e.element,"processed")}else e.result.success(e),this._elements.splice(this._elements.length-1,1)}}}),lc.core.createClass("lc.html.processor.ElementStatus",function(e,t){this.element=e,this._mainStatus=t,this._state=lc.html.processor.STATE_RUNNING,this._preprocessors=lc.html.processor._preprocessors.splice(),this._children=void 0,this._postprocessors=void 0,this.result=new lc.async.Future},{interrupt:function(){this._state=lc.html.processor.STATE_INTERRUPTED},stop:function(){this._state=lc.html.processor.STATE_STOPPED},resume:function(){this._state=lc.html.processor.STATE_RUNNING,this._mainStatus._continueProcessing()}}),lc.events.registerCustomEvent("processed",function(e,t){}),lc.core.createClass("lc.layout.Handler",function(e){(e._lc_layout_handler=this)._listeners=[],this._refreshValues(e)},{_refreshValues:function(e){this._clientWidth=e.clientWidth,this._clientHeight=e.clientHeight,this._offsetWidth=e.offsetWidth,this._offsetHeight=e.offsetHeight,this._scrollWidth=e.scrollWidth,this._scrollHeight=e.scrollHeight},_check:function(e){e.clientWidth==this._clientWidth&&e.clientHeight==this._clientHeight&&e.offsetWidth==this._offsetWidth&&e.offsetHeight==this._offsetHeight&&e.scrollWidth==this._scrollWidth&&e.scrollHeight==this._scrollHeight||(lc.async.Callback.callListeners(this._listeners),this._refreshValues(e))}}),lc.layout.onChange=function(e,t){e._lc_layout_handler||new lc.layout.Handler(e),e._lc_layout_handler._listeners.push(t)},lc.layout.triggerChange=function(e){e._lc_layout_handler&&e._lc_layout_handler._check(e);for(var t=0;t<e.childNodes.length;++t)1==e.childNodes[t].nodeType&&lc.layout.triggerChange(e.childNodes[t])},window.addEventListener("resize",function(){lc.layout.triggerChange(document.body)}),lc.layout.getAbsolutePosition=function(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e.offsetParent!=document.body;)e=e.offsetParent,t.x-=e.scrollLeft,t.y-=e.scrollTop,t.x+=e.offsetLeft,t.y+=e.offsetTop;return t},lc.core.namespace("lc.locale",{_userLanguages:[],_lang:void 0,_namespaces:[],_listeners:[],_localized:[],setLanguage:function(e){if(-1!=(t=lc.locale._userLanguages.indexOf(e))&&lc.locale._currentLanguage!=e){window.localStorage?window.localStorage.setItem("lc.locale",e):lc.cookies.set("lc.locale",e,"/",31536e3);for(var t=0;t<lc.locale._namespaces.length;++t)lc.locale._namespaces[t].reload();lc.async.Callback.callListeners(lc.locale._listeners,[e]);for(t=0;t<lc.locale._localized.length;++t)this._updateLocalized(lc.locale._localized[t])}},declare:function(e,t,s){Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;++n)if(lc.locale.hasNamespace(t[n]))lc.log.warn("lc.locale","Locale namespace "+t[n]+" is already defined");else{var r=new lc.locale.Namespace(t[n],e,s);lc.locale._namespaces.push(r),lc.log.debug("lc.locale","Locale namespace "+r.name+" declared at "+e)}},hasNamespace:function(e){return null!=getNamespace(e)},getNamespace:function(e){for(var t=0;t<lc.locale._namespaces.length;++t)if(lc.locale._namespaces[t].name==e)return lc.locale._namespaces[t]},getFullyAvailableLanguages:function(){for(var t=null,s=new lc.async.JoinPoint,e=new lc.async.Future,n=0;n<lc.locale._namespaces.length;++n){var r=lc.locale._namespaces[n];if(Array.isArray(r.languages))if(null==t)t=r.languages.splice();else for(n=0;n<t.length;++n)r.languages.indexOf(t[n])<0&&(t.splice(n,1),n--);else s.addToJoin(1),r.languages.onsuccess(new lc.async.Callback(r,function(){if(null==t)t=this.languages.splice();else for(var e=0;e<t.length;++e)this.languages.indexOf(t[e])<0&&(t.splice(e,1),e--);s.join()}))}return s.start(),s.onsuccess(function(){e.success(t)}),e},getPreferredLanguageAmong:function(e){for(var t=0;t<lc.locale._userLanguages.length;++t)if(0<=e.indexOf(lc.locale._userLanguages[t]))return lc.locale._userLanguages[t];return null},listenLanguage:function(e){this._listeners.push(e),this._lang&&lc.async.Callback.callListeners(e,[this._lang])},unlistenLanguage:function(e){this._listeners.remove(e)},localizeAttribute:function(e,t,s,n,r){var o={namespace:s,key:n,params:r,element:e,attributeName:t,localize:function(e){this.element[t]=e}};this._localized.push(o),this._lang&&this._updateLocalized(o)},textNode:function(e,t,s){var n=document.createTextNode("");return lc.locale.localizeAttribute(n,"nodeValue",e,t,s),n},_updateLocalized:function(e){var t=lc.locale.getNamespace(e.namespace);t||e.localize("[unknown namespace '"+e.namespace+"']"),t.getStringAsync(e.key,e.params).onsuccess(new lc.async.Callback(e,function(e){this.localize(e)}))}}),lc.core.createClass("lc.locale.Namespace",function(e,t,s){"/"!=t.charAt(t.length-1)&&(t+="/"),this.name=e,this.url=t+e,this._content=void 0,s?(this.languages=s,lc.locale._lang&&this.reload()):this.languages=lc.ajax.get(this.url+".languages").onsuccess(new lc.async.Callback(this,function(e){for(var t=e.split(","),s=[],n=0;n<t.length;++n){var r=t[n].trim();0<r.length&&s.push(r)}this.languages=s,lc.locale._lang&&this.reload()}))},{reload:function(){this._content=lc.ajax.get(this.url+"."+lc.locale._lang).onsuccess(new lc.async.Callback(this,function(e){this._content=this._parse(e)}))},getStringAsync:function(e,t){var s=new lc.async.Future;return Array.isArray(this.languages)?this._getStringAsync(e,t,s):this.languages.onsuccess(new lc.async.Callback(this,function(){this._getStringAsync(e,t,s)})),s},_getStringAsync:function(e,t,s){Array.isArray(this.content)?this._getStringAsync2(t,s,e):this.content.onsuccess(new lc.async.Callback(this,function(){this._getStringAsync2(t,s,e)}))},_getStringAsync2:function(e,t,s){e.success(this.getStringSync(t,s))},getStringSync:function(e,t){for(var s=e.toLowerCase(),n=0;n<this.content.length;++n)if(this.content[n].key==s)return this._resolve(e,this.content[n].value,t);return"[unknown locale key '"+e+"' in namespace '"+this.name+"']"},_resolve:function(e,t,s){return t},_parse:function(e){for(var t=e.split("\n"),s=[],n=0;n<t.length;++n){var r=t[n].trim();if(0!=r.length)if(!r.startsWith("#"))r.indexOf("=")<0?lc.log.warn("lc.locale","Invalid locale line "+(n+1)+" in namespace "+this.name+": no '='"):s.push({key:r.substring(0,n).trim().toLowerCase(),value:r.substring(n+1).trim()})}return s}}),function(){var e;window.localStorage&&((e=window.localStorage.getItem("lc.locale"))&&!lc.locale._userLanguages.contains(e)&&lc.locale._userLanguages.push(e));(e=lc.cookies.get("lc.locale"))&&!lc.locale._userLanguages.contains(e)&&lc.locale._userLanguages.push(e);for(var t=navigator.languages?navigator.languages:navigator.language?[navigator.language]:navigator.userLanguage?[navigator.userLanguage]:["en"],s=0;s<t.length;++s)lc.locale._userLanguages.contains(t[s])||lc.locale._userLanguages.push(t[s]);lc.locale._userLanguages.contains("en")||lc.locale._userLanguages.push("en")}(),lc.app.onLoaded(function(){lc.locale._lang||lc.locale.getFullyAvailableLanguages().onsuccess(function(e){var t=lc.locale.getPreferredLanguageAmong(e);t&&lc.locale.setLanguage(t)})}),lc.app.onDefined(["lc.html.processor","lc.locale"],function(){lc.html.processor.addPreProcessor(function(e,t,s){},10)}),lc.core.namespace("lc.log",{Levels:{TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4},_formatComponents:[],_defaultLevel:2,_loggerLevel:{},setFormat:function(e){for(var t=[],s=0;s<e.length;){var n=e.indexOf("${",s);if(0<=n){var r=e.indexOf("}",n+2);if(0<r){s=r+1;var o=e.substring(n+2,r),c=-1;if(0<(n=o.indexOf(":"))&&(o=o.substring(0,n),c=parseInt(o.substring(n+1))),"time"==o){t.push(new lc.log.FormatComponentTime);continue}if("datetime"==o){t.push(new lc.log.FormatComponentDateTime);continue}if("level"==o){t.push(new lc.log.FormatComponentLevel(c));continue}if("logger"==o){t.push(new lc.log.FormatComponentLogger(c));continue}if("message"==o){t.push(new lc.log.FormatComponentMessage(c));continue}}}t.push(new lc.log.FormatComponentString(e.substr(s)));break}lc.log._formatComponents=t},setDefaultLevel:function(e){lc.log._defaultLevel=e},setLevel:function(e,t){"string"!=typeof e&&(e=lc.core.typeOf(e)),lc.log._loggerLevel[e]=t},log:function(e,t,s){if(e){if("string"!=typeof e&&(e=lc.core.typeOf(e)),void 0===lc.log._loggerLevel[e]){if(t<lc.log._defaultLevel)return!1}else if(t<lc.log._loggerLevel[e])return!1}else if(t<lc.log._defaultLevel)return!1;if(!s)return!0;for(var n="",r=0;r<lc.log._formatComponents.length;++r)n+=lc.log._formatComponents[r].format(e,t,s);t==lc.log.Levels.ERROR?console.error(n):t==lc.log.Levels.WARN?console.warn(n):t==lc.log.Levels.INFO?console.info(n):t==lc.log.Levels.DEBUG?console.debug(n):console.log(n)},trace:function(e,t){return lc.log.log(e,lc.log.Levels.TRACE,t)},debug:function(e,t){return lc.log.log(e,lc.log.Levels.DEBUG,t)},info:function(e,t){return lc.log.log(e,lc.log.Levels.INFO,t)},warn:function(e,t){return lc.log.log(e,lc.log.Levels.WARN,t)},error:function(e,t){return lc.log.log(e,lc.log.Levels.ERROR,t)}}),lc.core.createClass("lc.log.FormatComponentString",function(e){this.string=e},{format:function(e,t,s){return string}}),lc.core.createClass("lc.log.FormatComponentTime",function(){},{format:function(e,t,s){return(new Date).toLocaleTimeString()}}),lc.core.createClass("lc.log.FormatComponentDateTime",function(){},{format:function(e,t,s){return(new Date).toLocaleString()}}),lc.core.createClass("lc.log.FormatComponentLevel",function(e){this.size=e<=0?5:e},{format:function(e,t,s){var n="";for(var r in lc.log.Levels)if(lc.log.Levels[r]==t){n=r;break}for(n.length>this.size&&(n=n.substring(0,this.size));n.length<this.size;)n+=" ";return n}}),lc.core.createClass("lc.log.FormatComponentLogger",function(e){this.size=e},{format:function(e,t,s){var n=e;if(0<this.size)for(n.length>this.size&&(n=n.substring(0,this.size));n.length<this.size;)n+=" ";return n}}),lc.core.createClass("lc.log.FormatComponentMessage",function(e){this.size=e},{format:function(e,t,s){var n=""+s;if(0<this.size)for(n.length>this.size&&(n=n.substring(0,this.size));n.length<this.size;)n+=" ";return n}}),lc.log.setFormat("${time} ${level} ${logger:15} ${message}"),lc.app.onDefined(["lc.resources","lc.Cache"],function(){lc.resources._css_cache=new lc.Cache,lc.resources.css=function(e){var t=e instanceof lc.URL?e:new lc.URL(e),n=t.toString(),r=lc.resources._css_cache.get(n);if(r)return r.future;var o=document.createElement("LINK");return o.rel="stylesheet",o.type="text/css",r={url:t,element:o,future:new lc.async.Future},lc.resources._css_cache.set(n,r),o.onload=function(){lc.log.debug("lc.resources","CSS loaded: "+n),r.future.success(o)},s.onerror=function(){lc.log.error("lc.resources","Error loading CSS "+n),js.future.error("CSS loading error")},o.href=n,document.getElementsByTagName("HEAD")[0].appendChild(o),r.future}}),lc.app.onDefined(["lc.resources","lc.Cache"],function(){lc.resources._html_cache=new lc.Cache(9e5),lc.resources.html=function(e){var t=e instanceof lc.URL?e:new lc.URL(e),s=t.toString(),n=lc.resources._html_cache.get(s);return n||(n={url:t,html:null,future:new lc.async.Future},lc.resources._html_cache.set(s,n),lc.ajax.get(s).onsuccess(function(e){n.html=e,n.future.success(e)}).onerror(function(e){n.html="<div>"+e+"</div>",n.future.success(html)})),n.future},lc.resources.htm=lc.resources.html}),lc.app.onDefined(["lc.resources","lc.Cache"],function(){lc.resources._js_cache=new lc.Cache,lc.resources.js=function(e){var t=e instanceof lc.URL?e:new lc.URL(e),s=t.toString(),n=lc.resources._js_cache.get(s);if(n)return n.future;var r=document.createElement("SCRIPT");return n={url:t,element:r,future:new lc.async.Future},lc.resources._js_cache.set(s,n),r.type="text/javascript",r.onload=function(){lc.log.debug("lc.resources","Javascript loaded: "+s),n.future.success(r),lc.app.newDefinitionsAvailable()},r.onerror=function(){lc.log.error("lc.resources","Error loading javascript "+s),n.future.error("Javascript loading error")},r.src=s,document.getElementsByTagName("HEAD")[0].appendChild(r),n.future},lc.resources.javascript=lc.resources.js}),lc.core.namespace("lc.resources",{load:function(e,t){var s=e instanceof lc.URL?e:new lc.URL(e);if(!t){var n=s.path.lastIndexOf(".");if(n<0){lc.log.error("lc.resources","Unable to load a resource without an extension: "+s.toString());var r=new lc.async.Future;return r.error("Unable to load a resource without an extension: "+s.toString()),r}t=s.path.substring(n+1)}return void 0===lc.resources[t]&&(t="unknownType"),lc.resources[t](s)},loadInSequence:function(t,s){var n=new lc.async.Future,r=function(e){e!=t.length?lc.resources.load(t[e],s).onsuccess(new lc.async.Callback(this,r,[e+1])).onerror(n):n.success(null)};return r(0),n},loadInParallel:function(e,t){for(var s=new lc.async.JoinPoint,n=0;n<e.length;++n)s.addToJoin(lc.resources.load(e[n],t));return s.start(),s},_default_cache:null,unknownType:function(e){lc.resources._default_cache||(lc.resources._default_cache=new lc.Cache(6e5));var t=e instanceof lc.URL?e.toString():e,s=lc.resources._default_cache.get(t);if(s)return s.future;var n=lc.ajax.get(e);return s={future:n},lc.resources._default_cache.set(t,s),n}}),lc.core.createClass("lc.URL",function(e){if(e instanceof lc.URL||void 0!==e.protocol)return this.protocol=e.protocol,this.host=e.host,this.port=e.port,this.path=e.path,this.hash=e.hash,void(this.params=lc.copy(e.params));"function"==typeof e.toString&&(e=e.toString());var t=e.indexOf("://");if(0<t)this.protocol=e.substr(0,t).toLowerCase(),t=(e=e.substr(t+3)).indexOf("/"),this.host=e.substr(0,t),e=e.substr(t),0<(t=this.host.indexOf(":"))?(this.port=this.host.substr(t+1),this.host=this.host.substr(0,t)):this.port=null;else if(window?(this.protocol=window.location.protocol.substr(0,window.location.protocol.length-1),this.host=window.location.hostname,this.port=window.location.port):(this.protocol="",this.host="",this.port=""),!e.startsWith("/")){var s;if(document.baseURI)s=new lc.URL(document.baseURI);else{var n=document.getElementsByTagName("base");s=0<n.length?new lc.URL(n[0].href):new lc.URL(location.toString())}(t=(s=s.path).lastIndexOf("/"))<s.length-1&&(s=s.substring(0,t+1)),e=s+e}if(0<(t=e.indexOf("#"))&&(this.hash=e.substr(t+1),e=e.substr(0,t)),t=e.indexOf("?"),this.params=new Object,0<t){for(this.path=e.substr(0,t),e=e.substr(t+1);0<e.length&&0<=(t=e.indexOf("&"));){var r=e.substr(0,t);e=e.substr(t+1),0<(t=r.indexOf("="))?this.params[lc.URL.decode(r.substr(0,t))]=lc.URL.decode(r.substr(t+1)):this.params[lc.URL.decode(r)]=""}0<e.length&&(0<(t=e.indexOf("="))?this.params[lc.URL.decode(e.substr(0,t))]=lc.URL.decode(e.substr(t+1)):this.params[lc.URL.decode(e)]="")}else this.path=e;for("/"!=this.path.substr(0,1)&&window.location.pathname&&(t=(e=window.location.pathname).lastIndexOf("/"),e=e.substr(0,t+1),this.path=e+this.path);0<(t=this.path.indexOf("/../"));){var o=this.path.substr(0,t).lastIndexOf("/");if(o<0)break;this.path=this.path.substr(0,o+1)+this.path.substr(t+4)}this.host=this.host.toLowerCase(),this.path=this.path.toLowerCase()},{toString:function(){var e;this.protocol?(e=this.protocol+"://"+this.host,this.port&&(e+=":"+this.port)):e="",e+=this.path;var t=!0;for(var s in this.params)t?(e+="?",t=!1):e+="&",e+=encodeURIComponent(s)+"="+encodeURIComponent(this.params[s]);return this.hash&&(e+="#"+this.hash),e},equals:function(e){if(!this.equalsWithoutParameters(e))return!1;for(var t in this.params)if(e.params[t]!=this.params[t])return!1;for(var t in e.params)if(e.params[t]!=this.params[t])return!1;return!0},equalsWithoutParameters:function(e){return this.protocol==e.protocol&&(this.host==e.host&&(this.port==e.port&&this.path==e.path))}}),lc.URL.decode=function(e){return decodeURIComponent(e).replace(/\+/g," ")},lc.core.namespace("lc.xml",{getChildElementsByName:function(e,t){t=t.toUpperCase();for(var s=[],n=0;n<e.childNodes.length;++n)1==e.childNodes[n].nodeType&&e.childNodes[n].nodeName==t&&s.push(e.childNodes[n]);return s},getChildByName:function(e,t){t=t.toUpperCase();for(var s=0;s<e.childNodes.length;++s)if(1==e.childNodes[s].nodeType&&e.childNodes[s].nodeName==t)return e.childNodes[s];return null}}),lc.app.onLoaded(function(){lc.html.process(document.body,function(){lc.layout.triggerChange(document.body)})}),lc.core._loaded=!0,lc.app.newDefinitionsAvailable();
//# sourceMappingURL=lc-core.min.js.map