String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),Array.prototype.contains=function(e){return-1!=this.indexOf(e)},Array.prototype.remove=function(e){for(var t=0;t<this.length;++t)this[t]==e&&(this.splice(t,1),t--)},Array.prototype.removeUnique=function(e){var t=this.indexOf(e);0<=t&&this.splice(t,1)},Array.prototype.isSame=function(e){if(!Array.isArray(e))return!1;if(this.length!=e.length)return!1;for(var t=0;t<this.length;++t)if(this[t]!==e[t])return!1;return!0},Array.prototype.clear=function(){0<this.length&&this.splice(0,this.length)},Array.prototype.removeElements=function(e){for(var t=0;t<this.length;++t)e.contains(this[t])&&(this.splice(t,1),t--)},Array.prototype.pushAll=function(e){Array.prototype.push.apply(this,e)},"undefined"==typeof lc&&(lc={}),lc.core={namespace:function(e,t){for(var n=e.split("."),u=window,s=0;s<n.length;++s)void 0===u[n[s]]&&(u[n[s]]={}),u=u[n[s]];return lc.core.merge(u,t)},merge:function(e,t){for(var n in t)e[n]=t[n];return e},copy:function(e){if(Array.isArray(e))return e.slice();var t={};for(var n in e)t[n]=e[n];return t},copyDeep:function(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;++n)t.push(lc.core.copyDeep(e[n]));return t}if("object"==typeof e){var u={};for(var s in e)u[s]=lc.core.copyDeep(e[s]);return u}return e},createClass:function(e,t,n){for(var u=e.split("."),s=window,r=0;r<u.length-1;++r)void 0===s[u[r]]&&(s[u[r]]={}),s=s[u[r]];var a=u[u.length-1],c=void 0===s[a]?void 0:s[a];if(s[a]=t,s[a].prototype=n,s[a].prototype.constructor=t,c)for(var o in c)s[a][o]=c[o];return s[a]._lcClass=e,s[a]._lcExtends=[],parent[a]},extendClass:function(e,t,n,u){for(var s=e.split("."),r=window,a=0;a<s.length-1;++a)void 0===r[s[a]]&&(r[s[a]]={}),r=r[s[a]];var c=s[s.length-1],o=void 0===r[c]?void 0:r[c];if(r[c]=n,o)for(var i in o)r[c][i]=o[i];r[c]._lcClass=e,r[c]._lcExtends=[],Array.isArray(t)||(t=[t]);var l={};for(a=0;a<t.length;++a){if(!t[a])throw new Error("Undefined extended class (index "+a+") for "+e);if(void 0===t[a]._lcClass)throw new Error("Not a valid class to extend: "+t[a]+" (when defining class "+e+")");if(lc.core.merge(l,t[a].prototype),r[c]._lcExtends.indexOf(t[a])<0&&r[c]._lcExtends.push(t[a]._lcClass),t[a]._lcExtends)for(var f=0;f<t[a]._lcExtends.length;++f)r[c]._lcExtends.indexOf(t[a]._lcExtends[f])<0&&r[c]._lcExtends.push(t[a]._lcExtends[f])}for(var i in l)void 0===u[i]&&(u[i]=l[i]);return r[c].prototype=u,r[c].prototype.constructor=n,r[c]},anonymousClass:function(e,t,n){var u=t;u._lcClass="<anonymous>",u._lcExtends=[],Array.isArray(e)||(e=[e]);for(var s={},r=0;r<e.length;++r){if(!e[r])throw new Error("Undefined extended class (index "+r+")");if(void 0===e[r]._lcClass)throw new Error("Not a valid class to extend: "+e[r]);if(lc.core.merge(s,e[r].prototype),u._lcExtends.indexOf(e[r])<0&&u._lcExtends.push(e[r]._lcClass),e[r]._lcExtends)for(var a=0;a<e[r]._lcExtends.length;++a)u._lcExtends.indexOf(e[r]._lcExtends[a])<0&&u._lcExtends.push(e[r]._lcExtends[a])}for(var c in s)void 0===n[c]&&(n[c]=s[c]);return u.prototype=n,u.prototype.constructor=t,u},fromName:function(e){return lc.core._fromName(window,e)},_fromName:function(e,t){if(void 0!==e[t])return e[t];for(var n=0;n<t.length;){var u=t.indexOf(".",n);if(u<=0)return;if(void 0!==e[t.substring(0,u)]){var s=lc.core._fromName(e[t.substring(0,u)],t.substring(u+1));if(s)return s}n=u+1}},instanceOf:function(e,t){if("string"==typeof t&&(t=lc.core.fromName(t)),e instanceof t)return!0;if("function"!=typeof e.constructor)return!1;if(void 0===e.constructor._lcExtends)return!1;for(var n=0;n<e.constructor._lcExtends.length;++n)if(lc.core.fromName(e.constructor._lcExtends[n])==t)return!0;return!1},isExtending:function(e,t){if("string"==typeof e&&(e=lc.core.fromName(e)),"string"==typeof t&&(t=lc.core.fromName(t)),void 0===e._lcExtends)return!1;for(var n=0;n<e._lcExtends.length;++n)if(lc.core.fromName(e._lcExtends[n])==t)return!0;return!1},getExtendedClasses:function(e){if("function"!=typeof e.constructor)return[];if(void 0===e.constructor._lcExtends)return[];for(var t=[],n=0;n<e.constructor._lcExtends.length;++n)t.push(lc.core.fromName(e.constructor._lcExtends[n]));return t},typeOf:function(e){if(null===e)return"null";if("object"!=typeof e)return typeof e;if(e.constructor._lcClass)return e.constructor._lcClass;var t=e.constructor;if(t){if(t.name)return t.name;if(t.displayName)return t.displayName}return"[unknown]"},className:function(e){return e._lcClass},_idCounter:0,generateId:function(){return"id"+ ++lc.core._idCounter},getMyURL:function(){var t;try{toto.tutu()}catch(e){t=e.stack.split("\n")}for(var e=!0,n=0;n<t.length;++n)if(t[n].match(/http[s]?:\/\//)){if(!e){var u=t[n].match(/((http[s]?:\/\/.+\/)([^\/]+\.js)):/);return new lc.URL(u[1])}e=!1}return null}},lc.core.namespace("lc.app",{_expectedExpressions:[],_applicationListeners:[],onDefined:function(e,t){Array.isArray(e)||(e=[e]),lc.app._isDefined(e)?lc.async.Callback.callListeners(t):(lc.app._expectedExpressions.push({expressions:e,listener:t}),lc.log&&lc.log.trace("lc.app")&&lc.log.trace("lc.app","New waited expressions: "+e.length))},_isDefined:function(expressions){if(!lc.core._loaded)return!1;for(var i=0;i<expressions.length;++i){var value=void 0;try{value=eval("("+expressions[i]+")")}catch(e){}if(void 0===value)return!1}return!0},newDefinitionsAvailable:function(){if(0!=lc.app._expectedExpressions.length){var e;lc.log&&lc.log.trace("lc.app")&&lc.log.trace("lc.app","newDefinitionsAvailable: waiting = "+lc.app._expectedExpressions.length);do{e=lc.app._expectedExpressions.length;for(var t=0;t<lc.app._expectedExpressions.length;++t)lc.app._isDefined(lc.app._expectedExpressions[t].expressions)&&(lc.async.Callback.callListeners(lc.app._expectedExpressions[t].listener),lc.app._expectedExpressions.splice(t,1),t--)}while(0<e&&lc.app._expectedExpressions.length!=e);lc.log&&lc.log.trace("lc.app")&&lc.log.trace("lc.app","Still waiting for expressions: "+lc.app._expectedExpressions.length)}},onLoaded:function(e){null===lc.app._applicationListeners?lc.async.Callback.callListeners(e):lc.app._applicationListeners.push(e)},loaded:function(){lc.app.newDefinitionsAvailable(),lc.async.Callback.callListeners(lc.app._applicationListeners),lc.app._applicationListeners=null,lc.app.newDefinitionsAvailable();for(var e=0;e<lc.app._expectedExpressions.length;++e)lc.log.warn("lc.app","Application loaded but still waiting for: "+lc.app._expectedExpressions[e].expressions);lc.log.debug("lc.app","Application loaded.")},_pending:[],_futureListeners:[],pending:function(e){lc.app._pending.push(e),1==lc.app._pending.length&&lc.app._working(),e.ondone(function(){lc.app._pending.remove(e),0==lc.app._pending.length&&lc.app._idle()}),lc.async.Callback.callListeners(lc.app._futureListeners,[e])},_idleListeners:[],_workingListeners:[],_idle:function(){lc.async.Callback.callListeners(lc.app._idleListeners)},_working:function(){lc.async.Callback.callListeners(lc.app._workingListeners)},addIdleListener:function(e){lc.app._idleListeners.push(e),0==lc.app._pending.length&&lc.async.Callback.callListeners(e)},removeIdleListener:function(e){lc.app._idleListeners.remove(e)},addWorkingListener:function(e){lc.app._workingListeners.push(e),0<lc.app._pending.length&&lc.async.Callback.callListeners(e)},removeWorkingListener:function(e){lc.app._workingListeners.remove(e)},addAsynchronousOperationListener:function(e){lc.app._futureListeners.push(e)},removeAsynchronousOperationListener:function(e){lc.app._futureListeners.remove(e)}}),window.addEventListener("load",function(){lc.app.newDefinitionsAvailable(),document.body.addEventListener("ready",lc.app.newDefinitionsAvailable)}),setTimeout(function(){0==lc.app._pending.length&&lc.app._idle()},1),lc.core.namespace("lc.animation",{animate:function(s,r,a){void 0===r&&(r="lc-animate-start",a="lc-animate-end");var c,o,i=new lc.async.Future,l=!1,e=!1;return c=function(){l=!0,s.removeEventListener("transitionstart",c)},o=function(){e||(lc.css.removeClass(s,"lc-animate"),lc.css.removeClass(s,a),s.removeEventListener("transitionend",o),s.removeEventListener("transitioncancel",o),e=!0,i.success())},s.addEventListener("transitionstart",c),s.addEventListener("transitionend",o),s.addEventListener("transitioncancel",o),lc.css.addClass(s,"lc-animate"),lc.css.addClass(s,r),setTimeout(function(){var e=getComputedStyle(s);if(e.transitionProperty&&(l=!0),!l)return lc.css.removeClass(s,"lc-animate"),lc.css.removeClass(s,r),s.removeEventListener("transitionstart",c),s.removeEventListener("transitionend",o),s.removeEventListener("transitioncancel",o),void i.success();lc.css.removeClass(s,r),lc.css.addClass(s,a);var t=e.transitionDuration,n=t.indexOf("ms"),u=t.indexOf("s");t=0<n&&n<u?parseInt(t.substring(0,n)):0<u?1e3*parseFloat(t.substring(0,u)):0,setTimeout(o,Math.floor(t+1))},1),i},animateReverse:function(e){return this.animate(e,"lc-animate-end","lc-animate-start")},timing:{linear:function(e,t,n,u){return e*n/u+t},easeInQuad:function(e,t,n,u){return n*(e/=u)*e+t},easeOutQuad:function(e,t,n,u){return-n*(e/=u)*(e-2)+t},easeInOutQuad:function(e,t,n,u){return(e/=u/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,u){return n*(e/=u)*e*e+t},easeOutCubic:function(e,t,n,u){return n*((e=e/u-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,u){return(e/=u/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,n,u){return n*(e/=u)*e*e*e+t},easeOutQuart:function(e,t,n,u){return-n*((e=e/u-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,u){return(e/=u/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,n,u){return n*(e/=u)*e*e*e*e+t},easeOutQuint:function(e,t,n,u){return n*((e=e/u-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,u){return(e/=u/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,n,u){return-n*Math.cos(e/u*(Math.PI/2))+n+t},easeOutSine:function(e,t,n,u){return n*Math.sin(e/u*(Math.PI/2))+t},easeInOutSine:function(e,t,n,u){return-n/2*(Math.cos(Math.PI*e/u)-1)+t},easeInExpo:function(e,t,n,u){return 0==e?t:n*Math.pow(2,10*(e/u-1))+t},easeOutExpo:function(e,t,n,u){return e==u?t+n:n*(1-Math.pow(2,-10*e/u))+t},easeInOutExpo:function(e,t,n,u){return 0==e?t:e==u?t+n:(e/=u/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,n,u){return-n*(Math.sqrt(1-(e/=u)*e)-1)+t},easeOutCirc:function(e,t,n,u){return n*Math.sqrt(1-(e=e/u-1)*e)+t},easeInOutCirc:function(e,t,n,u){return(e/=u/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,n,u){var s=1.70158,r=0,a=n;if(0==e)return t;if(1==(e/=u))return t+n;if(r||(r=.3*u),a<Math.abs(n)){a=n;s=r/4}else s=r/(2*Math.PI)*Math.asin(n/a);return-a*Math.pow(2,10*(e-=1))*Math.sin((e*u-s)*(2*Math.PI)/r)+t},easeOutElastic:function(e,t,n,u){var s=1.70158,r=0,a=n;if(0==e)return t;if(1==(e/=u))return t+n;if(r||(r=.3*u),a<Math.abs(n)){a=n;s=r/4}else s=r/(2*Math.PI)*Math.asin(n/a);return a*Math.pow(2,-10*e)*Math.sin((e*u-s)*(2*Math.PI)/r)+n+t},easeInOutElastic:function(e,t,n,u){var s=1.70158,r=0,a=n;if(0==e)return t;if(2==(e/=u/2))return t+n;if(r||(r=u*(.3*1.5)),a<Math.abs(n)){a=n;s=r/4}else s=r/(2*Math.PI)*Math.asin(n/a);return e<1?a*Math.pow(2,10*(e-=1))*Math.sin((e*u-s)*(2*Math.PI)/r)*-.5+t:a*Math.pow(2,-10*(e-=1))*Math.sin((e*u-s)*(2*Math.PI)/r)*.5+n+t},easeInBack:function(e,t,n,u,s){return null==s&&(s=1.70158),n*(e/=u)*e*((s+1)*e-s)+t},easeOutBack:function(e,t,n,u,s){return null==s&&(s=1.70158),n*((e=e/u-1)*e*((s+1)*e+s)+1)+t},easeInOutBack:function(e,t,n,u,s){return null==s&&(s=1.70158),(e/=u/2)<1?n/2*(e*e*((1+(s*=1.525))*e-s))+t:n/2*((e-=2)*e*((1+(s*=1.525))*e+s)+2)+t},easeInBounce:function(e,t,n,u){return n-lc.animation.functions.easeOutBounce(u-e,0,n,u)+t},easeOutBounce:function(e,t,n,u){return(e/=u)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,n,u){return e<u/2?.5*lc.animation.functions.easeInBounce(2*e,0,n,u)+t:.5*lc.animation.functions.easeOutBounce(2*e-u,0,n,u)+.5*n+t}},collapseHeight:function(e,t){e.style.transitionProperty="height,transform,padding",e.style.transitionDuration=t+"ms",e.style.transitionTimingFunction="ease-in-out",e.style.transformOrigin="top",e.style.overflow="hidden";var n=getComputedStyle(e);e.style.paddingTop=n.paddingTop,e.style.paddingBottom=n.paddingBottom;var u=parseInt(n.paddingTop);isNaN(u)&&(u=0);var s=parseInt(n.paddingBottom);isNaN(s)&&(s=0),e.style.height=e.clientHeight-u-s+"px",e.style.transform="scaleY(1)";var r=new lc.async.Future;return setTimeout(function(){e.style.height="0px",e.style.transform="scaleY(0)",e.style.paddingTop="0px",e.style.paddingBottom="0px",setTimeout(function(){e.style.height="",e.style.transform="",e.style.paddingTop="",e.style.paddingBottom="",e.style.transitionProperty="",e.style.transitionDuration="",e.style.transitionTimingFunction="",e.style.overflow="",r.success()},t)},0),r},expandHeight:function(n,u){var s=getComputedStyle(n);n.style.paddingTop="0px",n.style.paddingBottom="0px";var r=n.clientHeight;n.style.transitionProperty="height,transform,padding",n.style.transitionDuration=u+"ms",n.style.transitionTimingFunction="ease-in-out",n.style.transformOrigin="top",n.style.overflow="hidden",n.style.height="0px",n.style.transform="scaleY(0)";var a=new lc.async.Future;return setTimeout(function(){n.style.paddingTop=s.paddingTop,n.style.paddingBottom=s.paddingBottom;var e=parseInt(s.paddingTop);isNaN(e)&&(e=0);var t=parseInt(s.paddingBottom);isNaN(t)&&(t=0),n.style.height=r-e-t+"px",n.style.transform="scaleY(1)",setTimeout(function(){n.style.height="",n.style.transform="",n.style.paddingTop="",n.style.paddingBottom="",n.style.transitionProperty="",n.style.transitionDuration="",n.style.transitionTimingFunction="",n.style.overflow="",a.success()},u)},0),a},collapseWidth:function(e,t){e.style.transitionProperty="width,transform,padding",e.style.transitionDuration=t+"ms",e.style.transitionTimingFunction="ease-in-out",e.style.transformOrigin="left",e.style.overflow="hidden";var n=getComputedStyle(e);e.style.paddingLeft=n.paddingLeft,e.style.paddingRight=n.paddingRight;var u=parseInt(n.paddingTop);isNaN(u)&&(u=0);var s=parseInt(n.paddingBottom);isNaN(s)&&(s=0),e.style.width=e.clientWidth-u-s+"px",e.style.transform="scaleX(1)";var r=new lc.async.Future;return setTimeout(function(){e.style.width="0px",e.style.transform="scaleX(0)",e.style.paddingLeft="0px",e.style.paddingRight="0px",setTimeout(function(){e.style.width="",e.style.transform="",e.style.paddingLeft="",e.style.paddingRight="",e.style.transitionProperty="",e.style.transitionDuration="",e.style.transitionTimingFunction="",e.style.overflow="",r.success()},t)},0),r},expandWidth:function(n,u){var s=getComputedStyle(n),r=n.clientWidth;n.style.transitionProperty="width,transform,padding",n.style.transitionDuration=u+"ms",n.style.transitionTimingFunction="ease-in-out",n.style.transformOrigin="left",n.style.overflow="hidden",n.style.width="0px",n.style.transform="scaleY(0)",n.style.paddingLeft="0px",n.style.paddingRight="0px";var a=new lc.async.Future;return setTimeout(function(){n.style.paddingLeft=s.paddingLeft,n.style.paddingRight=s.paddingRight;var e=parseInt(s.paddingLeft);isNaN(e)&&(e=0);var t=parseInt(s.paddingRight);isNaN(t)&&(t=0),n.style.width=r-e-t+"px",n.style.transform="scaleY(1)",setTimeout(function(){n.style.width="",n.style.transform="",n.style.paddingLeft="",n.style.paddingRight="",n.style.transitionProperty="",n.style.transitionDuration="",n.style.transitionTimingFunction="",n.style.overflow="",a.success()},u)},0),a}}),lc.core.createClass("lc.animation.AnimatedElement",function(e,t,n){this._element=e,t||(t=lc.animation.timing.easeInOutCubic),this._timing=t,(!n||n<=0)&&(n=100),this._duration=n,this._properties=[],this._listeners=[]},{_start:-1,_forward:!0,_timeout:null,addProperty:function(e,t,n,u,s){this._properties.push({name:e,start:t,end:n,prefix:u,suffix:s})},addListener:function(e){this._listeners.push(lc.async.Callback.from(e))},setTimingFunction:function(e){e||(e=lc.animation.timing.easeInOutCubic),this._timing=e},setDuration:function(e){(!e||e<=0)&&(e=100),this._duration=e},forward:function(){var e=(new Date).getTime();if(null!=this._timeout)this._forward||(this._forward=!0,this._start=e-(this._start+this._duration-e));else{this._forward=!0,this._start=e,this._applyValues(0);var t=this;this._timeout=setTimeout(function(){t._update()},1)}},backward:function(){var e=(new Date).getTime();if(null!=this._timeout)this._forward&&(this._forward=!1,this._start=e-(this._start+this._duration-e));else{this._forward=!1,this._start=e,this._applyValues(this._duration);var t=this;this._timeout=setTimeout(function(){t._update()},1)}},_update:function(){var e=(new Date).getTime();if(e>=this._start+this._duration)return this._forward?this._applyValues(this._duration):this._applyValues(0),this._start=-1,void(this._timeout=null);this._forward?this._applyValues(e-this._start):this._applyValues(this._duration-(e-this._start));var t=this;this._timeout=setTimeout(function(){t._update()},10)},_applyValues:function(e){for(var t=this._timing(e,0,1,this._duration),n=0;n<this._properties.length;++n){var u=this._properties[n];this._element.style[u.name]=u.prefix+(u.start+(u.end-u.start)*t)+u.suffix}lc.async.Callback.callListeners(this._listeners,[this._element,t])}}),lc.core.createClass("lc.async.Callback",function(e,t,n){this._this=e,this._fct=t,this._args=n},{call:function(){for(var e=[],t=0;t<arguments.length;++t)e.push(arguments[t]);return this._args&&(e=this._args.concat(e)),this._fct.apply(this._this,e)},apply:function(e){var t=[];if(e)for(var n=0;n<e.length;++n)t.push(e[n]);return this._args&&(t=this._args.concat(t)),this._fct.apply(this._this,t)},toFunction:function(){var e=this;return function(){return e.apply(arguments)}}}),lc.async.Callback.callListeners=function(t,e){t=Array.isArray(t)?t.slice():[t],void 0===e&&(e=[]);for(var n=0;n<t.length;++n)try{if("function"==typeof t[n])t[n].apply(null,e);else{if(!lc.core.instanceOf(t[n],lc.async.Callback))throw new Error("Unexpected listener type: "+lc.core.typeOf(t[n]));t[n].apply(e)}}catch(e){lc.log.error("lc.async.Callback",(lc.core.instanceOf(t[n],lc.async.Callback),t[n]._fct),e)}},lc.async.Callback.from=function(e){if("function"==typeof e)return new lc.async.Callback(window,e);if(lc.core.instanceOf(e,lc.async.Callback))return e;throw new Error("Unexpected type: "+lc.core.typeOf(e))},lc.core.createClass("lc.async.Future",function(){this._successListeners=[],this._errorListeners=[],this._doneListeners=[]},{_done:!1,_result:void 0,_error:void 0,_successListeners:null,_errorListeners:null,_doneListeners:null,success:function(e){if(this._done)throw new Error("Future already done");this._result=e,this._done=!0,this._callListeners()},error:function(e){if(this._done)throw new Error("Future already done");this._error=e,this._done=!0,this._callListeners()},ondone:function(e){return this._done?lc.async.Callback.callListeners([e],[]):this._doneListeners.push(e),this},onsuccess:function(t){return lc.core.instanceOf(t,lc.async.Future)?onsuccess(function(e){t.success(e)}):(this._done?void 0===this._error&&lc.async.Callback.callListeners([t],[this._result]):this._successListeners.push(t),this)},onerror:function(t){return lc.core.instanceOf(t,lc.async.Future)?this.onerror(function(e){t.error(e)}):(this._done?null!=this._error&&lc.async.Callback.callListeners([t],[this._error]):this._errorListeners.push(t),this)},isDone:function(){return this._done},getResult:function(){return this._result},getError:function(){return this._error},forwardTo:function(t){this.onsuccess(function(e){t.success(e)}),this.onerror(function(e){t.error(e)})},_callListeners:function(){void 0===this._error?lc.async.Callback.callListeners(this._successListeners,[this._result]):lc.async.Callback.callListeners(this._errorListeners,[this._error]),lc.async.Callback.callListeners(this._doneListeners,[]),this._doneListeners=null,this._successListeners=null,this._errorListeners=null}}),lc.async.Future.alreadySuccess=function(e){var t=new lc.async.Future;return t.success(e),t},lc.async.Future.alreadyError=function(e){var t=new lc.async.Future;return t.error(e),t},lc.core.extendClass("lc.async.JoinPoint",lc.async.Future,function(){lc.async.Future.call(this),this._remaining=0,this._started=!1},{addToJoin:function(e){if("number"==typeof e)this._remaining+=e;else{if(!lc.core.instanceOf(e,lc.async.Future))throw"Unexpected type to join: "+lc.core.typeOf(e);this._remaining++,e.onsuccess(new lc.async.Callback(this,this.join)).onerror(new lc.async.Callback(this,this.error))}},start:function(){this._started=!0,this._check()},join:function(){if(this._remaining<=0)throw"JoinPoint: no more join expected";this._remaining--,this._started&&this._check()},_check:function(){this._done||this._remaining<=0&&this.success(null)}}),lc.async.JoinPoint.from=function(){for(var e=new lc.async.JoinPoint,t=0;t<arguments.length;++t)e.addToJoin(arguments[t]);return e.start(),e},lc.core.createClass("lc.Cache",function(e,t,n){if(this._timeout=e,this._onrelease=t,this._items=new Map,0<e){(n<=0||!n)&&(n=3e4);var u=this;this._interval=setInterval(function(){lc.log.trace("lc.Cache")&&lc.log.trace("lc.Cache","Check cache timeout"),u._checkTimeout()},n)}},{_items:null,set:function(e,t){var n=this._items.get(e);n&&this._onrelease&&this._onrelease(e,n.item),this._items.set(e,{item:t,used:(new Date).getTime()})},get:function(e){var t=this._items.get(e);if(t)return t.used=(new Date).getTime(),t.item},remove:function(e){var t=this._items.get(e);return!!t&&(this._onrelease&&this._onrelease(e,t.item),this._items.delete(e),!0)},clear:function(){this._onrelease&&this._items.forEach(function(e,t,n){this._onrelease(t,e.item)},this),this._items.clear()},close:function(){this._interval&&(clearInterval(this._interval),this._interval=null),this.clear(),this._items=null},_checkTimeout:function(){var u=(new Date).getTime()-this._timeout,s=this._onrelease;this._items.forEach(function(e,t,n){e.used<u&&(s&&s(t,e.item),n.delete(t))})}}),lc.core.createClass("lc.Configurable",function(e){for(var t in e||(e={}),e){var n=e[t],u={enumerable:!0};n.get?u.get=new Function('return this.configurableProperties["'+t+'"].get.call(this, this.configurableProperties);'):u.get=new Function('return this.configurableProperties["'+t+'"].value;'),n.set?u.set=new Function("value",'return this.configurableProperties["'+t+'"].set.call(this, value, this.configurableProperties);'):u.set=new Function("value",'return this.configurableProperties["'+t+'"].value = value;'),void 0!==n.writable&&(u.writable=n.writable),Object.defineProperty(this,t,u)}this.configurableProperties=e},{configurableProperties:{}}),lc.core.namespace("lc.Context.expression",{evaluate:function(t,e,n,u){var s=lc.Context.aggregate(e);if(u)for(var r in u)s[r]=u[r];for(var a in s)lc.Context.expression.validVariableName(a)||delete s[a];var c="",o=!0;for(var a in s)o?o=!1:c+=", ",c+=a;var i="(function("+c+")";for(var a in t.startsWith("{")?i+=t:i+="{return ("+t+");}",i+=").call(this,",o=!0,s)o?o=!1:i+=", ",i+="context."+a;i+=")";try{var l=new Function("context","return ("+i+")").call(n,s);return lc.log.trace("lc.Context.expression")&&lc.log.trace("lc.Context.expression",t+" = "+l+"\r\nthis = "+n+", properties: "+c),l}catch(e){throw lc.log.trace("lc.Context.expression")&&lc.log.trace("lc.Context.expression",t+": "+e+"\r\nthis = "+n+", properties: "+c+"\r\n"+e.stack),e}},validVariableName:function(e){return e.match(/^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/)},resolve:function(t,e){if(!t)return t;for(var n=0;0<=(n=t.indexOf("$ctx{",n));){var u=t.indexOf("}",n+5);if(u<0)break;try{var s=lc.Context.expression.evaluate(t.substring(n+5,u),e,e);t=t.substring(0,n)+s+t.substring(u+1)}catch(e){lc.log.error("lc.Context.expression","Invalid expression "+t.substring(n+5,u)+": "+e,e),n=u+1}}return t}}),lc.app.onDefined(["lc.events","lc.async.Callback"],function(){"use strict";lc.core.createClass("lc.Context",function(e){(e._lc_context=this).element=e,Object.defineProperty(this,"_values",{enumerable:!1,writable:!1,value:{}}),Object.defineProperty(this,"events",{enumerable:!1,writable:!1,value:new lc.events.Producer}),Object.defineProperty(this,"addProperty",{enumerable:!1,writable:!1,configurable:!1,value:lc.Context.prototype.addProperty}),Object.defineProperty(this,"removeProperty",{enumerable:!1,writable:!1,configurable:!1,value:lc.Context.prototype.removeProperty}),Object.defineProperty(this,"setProperty",{enumerable:!1,writable:!1,configurable:!1,value:lc.Context.prototype.setProperty}),Object.defineProperty(this,"hasProperty",{enumerable:!1,writable:!1,configurable:!1,value:lc.Context.prototype.hasProperty}),Object.defineProperty(this,"getProperty",{enumerable:!1,writable:!1,configurable:!1,value:lc.Context.prototype.getProperty}),this.events.registerEvents(["propertyAdded","propertyRemoved","propertySet","changed","destroyed"]),lc.Context.globalEvents.trigger("contextCreated",[this]),lc.events.listen(e,"destroy",new lc.async.Callback(this,function(){e._lc_context=null,this.events.trigger("destroyed",[this]),lc.Context.globalEvents.trigger("contextDestroyed",[this]),this.element=null}))},{addProperty:function(t,e){if(void 0!==this._values[t])throw"Property "+t+" already exists";this._values[t]=e,Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:function(){return this._values[t]},set:function(e){e!==this._values[t]&&(this._values[t]=e,this.events.trigger("propertySet",[this,t,e]),lc.Context.globalEvents.trigger("propertySet",[this,t,e]),this.events.trigger("changed",[this]),lc.Context.globalEvents.trigger("changed",[this]))}}),this.events.trigger("propertyAdded",[this,t,e]),lc.Context.globalEvents.trigger("propertyAdded",[this,t,e]),this.events.trigger("changed",[this]),lc.Context.globalEvents.trigger("changed",[this])},removeProperty:function(e){void 0!==this._values[e]&&(delete this._values[e],delete this[e],this.events.trigger("propertyRemoved",[this,e]),lc.Context.globalEvents.trigger("propertyRemoved",[this,e]),this.events.trigger("changed",[this]),lc.Context.globalEvents.trigger("changed",[this]))},setProperty:function(e,t){void 0!==this._values[e]?this[e]=t:this.addProperty(e,t)},hasProperty:function(e){return void 0!==this._values[e]},getProperty:function(e){if(void 0!==this._values[e])return this._values[e]}}),lc.Context.get=function(e,t){return void 0===e._lc_context?t?null:new lc.Context(e):e._lc_context},lc.Context.getValue=function(e,t){var n=lc.Context.get(e,!0);if(n)return n.getProperty(t)},lc.Context.searchValue=function(e,t){do{var n=lc.Context.get(e,!0);if(n&&n.hasProperty(t))return n.getProperty(t);e=e.parentNode}while(e)},lc.Context.aggregate=function(e){var t={};do{var n=lc.Context.get(e,!0);if(n)for(var u in n)void 0===t[u]&&(t[u]=n[u]);e=e.parentNode}while(e&&"HTML"!=e.nodeName);return t},lc.Context.globalEvents=new lc.events.Producer,lc.Context.globalEvents.registerEvents(["propertyAdded","propertyRemoved","propertySet","changed","contextCreated","contextDestroyed"])}),lc.core.namespace("lc.cookies",{get:function(e){return document.cookie.replace(new RegExp("(?:(?:^|.*;s*)"+e+"s*=s*([^;]*).*$)|^.*$"),"$1")},set:function(e,t,n,u){var s=e+"="+t;n&&(s+=";path="+n),u&&(s+=";max-age="+u),document.cookie=s}}),lc.core.namespace("lc.css",{hasClass:function(e,t){return e.className.split(" ").contains(t)},addClass:function(e,t){""!=e.className?e.className.split(" ").contains(t)||(e.className+=" "+t):e.className=t},removeClass:function(e,t){if(""!=e.className)if(e.className!=t){var n=e.className.split(" ");n.contains(t)&&(n.remove(t),e.className=n.join(" "))}else e.className=""},getClasses:function(e){return e.className.split(" ")}}),lc.core.namespace("lc.events",{_customEvents:{destroy:function(e,t){}},registerCustomEvent:function(e,t){t||(t=function(e,t){}),void 0===lc.events._customEvents[e]&&(lc.events._customEvents[e]=t)},triggerCustomEvent:function(e,t,n){if(e._eventListeners)for(var u=0;u<e._eventListeners.length;++u)e._eventListeners[u].eventType==t&&lc.async.Callback.callListeners(e._eventListeners[u].listener,n)},listen:function(e,t,n,u){if(!n)throw new Error("No listener given to lc.events.listen");e._eventListeners||(e._eventListeners=[]),"function"==typeof n&&(n=new lc.async.Callback(e,n));var s={eventType:t,listener:n};e._eventListeners.push(s),void 0===lc.events._customEvents[t]?(s.listenerFct=s.listener.toFunction(),e.addEventListener(t,s.listenerFct,u)):lc.events._customEvents[t](e,n)},unlisten:function(e,t,n,u){if(e._eventListeners)for(var s=0;s<e._eventListeners.length;++s)if(e._eventListeners[s].eventType==t&&(e._eventListeners[s].listener==n||e._eventListeners[s].listener._fct==n)){n=e._eventListeners[s].listenerFct,e._eventListeners[s].listener=null,e._eventListeners.splice(s,1);break}void 0===lc.events._customEvents[t]&&e.removeEventListener(t,n,u)},destroyed:function(e){if(!e._destroyed){if(e._destroyed=!0,e._eventListeners){var t=e._eventListeners.slice();e._eventListeners=null;for(var n=0;n<t.length;++n)"destroy"===t[n].eventType?lc.async.Callback.callListeners(t[n].listener):void 0===lc.events._customEvents[t[n].eventType]&&e.removeEventListener(t[n].eventType,t[n].listener._fct),t[n].listener=null}if(e.childNodes)for(n=0;n<e.childNodes.length;++n)lc.events.destroyed(e.childNodes[n])}}}),lc.app.onDefined("lc.html",function(){lc.html.addCloneHandler(function(e,t){if(t._eventListeners){t._eventListeners=t._eventListeners.slice();for(var n=0;n<t._eventListeners.length;++n){var u=t._eventListeners[n];if(t._eventListeners[n]={eventType:u.eventType,listener:new lc.async.Callback(u.listener.objThis,u.listener.fct,u.listener.args)},t._eventListeners[n].listener.objThis==e&&(t._eventListeners[n].listener.objThis=t),t._eventListeners[n].listener.args)for(var s=0;s<t._eventListeners[n].listener.args.length;++s)t._eventListeners[n].listener.args[s]==e&&(t._eventListeners[n].listener.args[s]=t)}}})}),lc.core.createClass("lc.events.Producer",function(){this.eventsListeners||(this.eventsListeners={},this.listen=this.on)},{registerEvent:function(e){e=e.toLowerCase(),this.eventsListeners[e]=[],lc.log.trace("lc.events.Producer")&&lc.log.trace("lc.events.Producer","Event registered: "+e)},registerEvents:function(e){for(var t=0;t<e.length;++t)this.registerEvent(e[t])},unregisterEvents:function(e){if(null!==this.eventsListeners)for(var t=0;t<e.length;++t)delete this.eventsListeners[e[t].toLowerCase()]},on:function(e,t){if(e=e.toLowerCase(),void 0===this.eventsListeners[e])throw new Error("Unknown event: "+e);this.eventsListeners[e].push(t)},unlisten:function(e,t){if(null!==this.eventsListeners){if(e=e.toLowerCase(),void 0===this.eventsListeners[e])throw new Error("Unknown event: "+e);for(var n=0;n<this.eventsListeners[e].length;++n)if(this.eventsListeners[e][n]==t){this.eventsListeners[e].splice(n,1);break}}},trigger:function(e,t){if(this.eventsListeners){if(e=e.toLowerCase(),void 0===this.eventsListeners[e])throw new Error("Unknown event: "+e);lc.log.debug("lc.events.Producer")&&lc.log.debug("lc.events.Producer",e+" on "+lc.core.typeOf(this)+" ("+this.eventsListeners[e].length+" listeners)"),lc.async.Callback.callListeners(this.eventsListeners[e],t)}},hasEvent:function(e){return e=e.toLowerCase(),void 0!==this.eventsListeners[e]},createListenersFromElement:function(e){if(e&&1==e.nodeType)for(var t=0;t<e.attributes.length;++t){var n=e.attributes.item(t);if(n.nodeName.startsWith("on-")){var u=n.nodeName.substring(3);this.hasEvent(u)?this.listen(u,new lc.async.Callback(this,function(t,n){try{lc.Context.expression.evaluate("{"+t+"}",e,this)}catch(e){lc.log.error("lc.events.Producer","Error in event listener from attribute on-"+n+": "+t,e)}},[n.nodeValue,u])):lc.log.warn("lc.events.Producer","Unknown event from attribute "+n.nodeName)}}},destroy:function(){this.eventsListeners=null}}),lc.core.createClass("lc.Extendable",function(){null===this.extensions&&(this.extensions=[],this._overrides={},lc.Extension.Registry.detect(this),this.extensions.sort(function(e,t){return t.priority-e.priority}))},{extensions:null,addExtension:function(t){if(null==this.getExtension(t)){try{t=new t}catch(e){return void lc.log.error("lc.Extendable","Error instantiating extension "+t+": "+e,e)}this.extensions.push(t);try{t.init(this)}catch(e){lc.log.error("lc.Extendable","Error initializing extension "+lc.core.typeOf(t)+": "+e,e)}return this.extensionAdded(t),t}},extensionAdded:function(e){},removeExtension:function(e){var t=!1;if("function"==typeof e){for(var n=0;n<this.extensions.length;++n)if(lc.core.instanceOf(this.extensions[n],e)){e=this.extensions[n],this.extensions.splice(n,1),t=!0;break}}else for(n=0;n<this.extensions.length;++n)if(this.extensions[n]==e){this.extensions.splice(n,1),t=!0;break}if(t){for(var u in this._overrides){var s=this._overrides[u];for(n=1;n<s.length;++n)if(s[n].extension===e&&s[n].impl&&(s.splice(n,1),1==s.length)){this[u]=s[0].impl,delete this._overrides[u];break}}e.destroy(this)}},getExtension:function(e){for(var t=0;t<this.extensions.length;++t)if(lc.core.instanceOf(this.extensions[t],e))return this.extensions[t];return null},hasExtension:function(e){return null!=this.getExtension(e)},callExtensions:function(t){if(this.extensions)for(var e=Array.prototype.slice.call(arguments,1),n=0;n<this.extensions.length;++n)if("function"==typeof this.extensions[n][t])try{if(this.extensions[n][t].apply(this.extensions[n],e),!this.extensions)return}catch(e){lc.log.error("lc.Extandable","Error calling method "+t+" on extension "+lc.core.typeOf(this.extensions[n])+": "+e,e)}},extensionOverridesMethod:function(e,t,n){void 0===this._overrides[t]&&(this._overrides[t]=[{extension:null,impl:this[t]}],this[t]=function(){return this._callOverriddenMethod(t,arguments)}),this._overrides[t].push({extension:e,impl:n})},_callOverriddenMethod:function(e,t){var n=this._overrides[e];return n[n.length-1].impl.apply(this,t)},callPreviousImplementation:function(e,t,n){for(var u=this._overrides[t],s=u.length-1;0<=s&&u[s].extension!=e;)s--;if(!(s<=0))return u[s-1].impl.apply(this,n)},destroy:function(){if(this.extensions){for(var e=0;e<this.extensions.length;++e)this.extensions[e].destroy(this);this.extensions=null}}}),lc.core.createClass("lc.Extension",function(){},{priority:0,detect:function(e){},init:function(e){},destroy:function(e){}}),lc.Extension.Registry={_extensions:[],register:function(e,t){lc.log.trace("lc.Extension")&&lc.log.trace("lc.Extension","Extension registered: "+lc.core.className(t)+" extending "+lc.core.className(e)),this._extensions.push({extended:e,extension:t})},detect:function(e){for(var t=0;t<this._extensions.length;++t)lc.core.instanceOf(e,this._extensions[t].extended)&&this._extensions[t].extension.prototype.detect(e)&&e.addExtension(this._extensions[t].extension)},getAvailableFor:function(e){for(var t=[],n=0;n<this._extensions.length;++n)(this._extensions[n].extended===e||lc.core.isExtending(e,this._extensions[n].extended))&&t.push(this._extensions[n].extension);return t}},lc.core.namespace("lc.html",{walkChildren:function(e,t){for(var n=0;n<e.childNodes.length;++n)lc.Callback.from(t).call(e.childNodes[n])||1==e.childNodes[n].nodeType&&lc.html.walkChildren(e.childNodes[n],t)},create:function(e,t){var n=document.createElement(e);if(t)for(var u in t)n[u]=t[u];return n},remove:function(e){lc.events.destroyed(e),e.parentNode&&e.parentNode.removeChild(e)},empty:function(e){for(;0<e.childNodes.length;)lc.html.remove(e.childNodes[0])},addOption:function(e,t,n){var u=document.createElement("OPTION");u.value=t,u.text=n,e.add(u)},insertAfter:function(e,t){return t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e)},removeChildrenAfter:function(e){for(;e.nextSibling;)lc.html.remove(e.nextSibling)},escape:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},_cloneHandlers:[],addCloneHandler:function(e){lc.html._cloneHandlers.push(e)},clone:function(e){var t=e.cloneNode(!0);return lc.html._clone(e,t),t},_clone:function(e,t){for(var n=0;n<lc.html._cloneHandlers.length;++n)lc.html._cloneHandlers[n](e,t);for(n=0;n<e.childNodes.length;++n)lc.html._clone(e.childNodes[n],t.childNodes[n])}}),lc.core.namespace("lc.html.processor",{_preprocessors:[],_postprocessors:[],addPreProcessor:function(e,t){t||(t=1e3),lc.html.processor._preprocessors.push({processor:e,priority:t}),lc.html.processor._preprocessors.sort(function(e,t){return t.priority-e.priority})},addPostProcessor:function(e,t){t||(t=1e3),lc.html.processor._postprocessors.push({processor:e,priority:t}),lc.html.processor._postprocessors.sort(function(e,t){return t.priority-e.priority})},removePreProcessor:function(e){for(var t=0;t<lc.html.processor._preprocessors.length;++t)if(lc.html.processor._preprocessors[t].processor===e)return void lc.html.processor._preprocessors.splice(t,1)},removePostProcessor:function(e){for(var t=0;t<lc.html.processor._postprocessors.length;++t)if(lc.html.processor._postprocessors[t].processor===e)return void lc.html.processor._postprocessors.splice(t,1)},removeProcessor:function(e){lc.html.processor.removePreProcessor(e),lc.html.processor.removePostProcessor(e)},STATE_RUNNING:0,STATE_INTERRUPTED:1,STATE_STOPPED:2,process:function(e){var t=new lc.html.processor.Status(e);return t._continueProcessing(),t.result},processContent:function(e){var t=new lc.html.processor.Status(e);return t._elements[0]._preprocessors=[],t._elements[0]._postprocessors=[],t._continueProcessing(),t.result}}),lc.core.createClass("lc.html.processor.Status",function(e){this._elements=[new lc.html.processor.ElementStatus(e,this)],this.result=new lc.async.Future},{stop:function(){this._state=lc.html.processor.STATE_STOPPED},_state:lc.html.processor.STATE_RUNNING,_continueProcessing:function(){if(this.result.isDone())throw new Error("Processing is already terminated.");for(;;){if(this._state==lc.html.processor.STATE_STOPPED){for(;0<this._elements.length;){var e=this._elements[this._elements.length-1];this._elements.splice(this._elements.length-1,1),e.result.success(e)}return void this.result.success(this)}if(0==this._elements.length)return void this.result.success(this);if((e=this._elements[this._elements.length-1])._state==lc.html.processor.STATE_INTERRUPTED)return;if(e._state!=lc.html.processor.STATE_STOPPED)if(0<e._preprocessors.length){var t=e._preprocessors[0];e._preprocessors.splice(0,1),lc.async.Callback.callListeners(t.processor,[e.element,e,this])}else{if(void 0===e._children){e._children=[];for(var n=0;n<e.element.childNodes.length;++n)e._children.push(e.element.childNodes[n])}if(0<e._children.length){var u=e._children[0];e._children.splice(0,1);var s=new lc.html.processor.ElementStatus(u,this);this._elements.push(s)}else if(void 0===e._postprocessors&&(e._postprocessors=lc.html.processor._postprocessors.slice()),0<e._postprocessors.length){t=e._postprocessors[0];e._postprocessors.splice(0,1),lc.async.Callback.callListeners(t.processor,[e.element,e,this])}else e.result.success(e),this._elements.splice(this._elements.length-1,1),lc.events.triggerCustomEvent(e.element,"processed")}else e.result.success(e),this._elements.splice(this._elements.length-1,1)}}}),lc.core.createClass("lc.html.processor.ElementStatus",function(e,t){this.element=e,this._mainStatus=t,this._state=lc.html.processor.STATE_RUNNING,this._preprocessors=lc.html.processor._preprocessors.slice(),this._children=void 0,this._postprocessors=void 0,this.result=new lc.async.Future},{interrupt:function(){this._state=lc.html.processor.STATE_INTERRUPTED},stop:function(){this._state=lc.html.processor.STATE_STOPPED},resume:function(){this._state=lc.html.processor.STATE_RUNNING,this._mainStatus._continueProcessing()}}),lc.events.registerCustomEvent("processed",function(e,t){}),lc.core.namespace("lc.http",{request:function(e,t){t instanceof lc.URL&&(t=t.toString());var n=new XMLHttpRequest;return n.open(e,t,!0),n},get:function(e,t){var n=lc.http.request("GET",e);t&&n.setRequestHeader("Accept",t),n.send();var u=new lc.async.Future;return n.future.onsuccess(function(e){200==e.status?u.success(e.responseText):u.error(e.status)}),u},_customizers:[],_customize:function(e){for(var t=0;t<lc.http._customizers.length;++t)lc.http._customizers[t](e)},addCustomizer:function(e){lc.http._customizers.push(e)},removeCustomizer:function(e){lc.http._customizers.remove(e)}}),lc.http.addCustomizer(function(e){lc.log.trace("lc.http")&&lc.log.trace("lc.http","Sending HTTP Request "+e._http_method+" "+e._http_url),e.future=new lc.async.Future,e.addEventListener("readystatechange",function(){4==e.readyState&&(lc.log.trace("lc.http")&&lc.log.trace("lc.http","HTTP Response received: "+e._http_method+" "+e._http_url+" => "+e.status+" "+e.statusText),e.future.success(e))})}),window._lc_http_XMLHttpRequest_open=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(e,t,n,u,s){window._lc_http_XMLHttpRequest_open.apply(this,[e,t,n,u,s]),this._http_method=e,this._http_url=t},window._lc_http_XMLHttpRequest_send=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=function(e){lc.http._customize(this),lc.app.pending(this.future),window._lc_http_XMLHttpRequest_send.apply(this,[e])},lc.core.namespace("lc.http.rest",{defaultFormat:"json",formats:{json:{mime:"application/json",toString:function(e){return JSON.stringify(e)},fromString:function(e){if(0!=e.length)return JSON.parse(e)}}},statusHandlers:{},get:function(e,t){t||(t=lc.http.rest.defaultFormat);var n=new lc.async.Future,u=lc.http.request("GET",e);return u.setRequestHeader("Accept",lc.http.rest.formats[t].mime),u.send(),lc.http.rest._waitResponse(u,t,n),n},post:function(e,t,n){return lc.http.rest._method("POST",e,t,n)},put:function(e,t,n){return lc.http.rest._method("PUT",e,t,n)},del:function(e,t,n){return lc.http.rest._method("DELETE",e,t,n)},handleResponseStatus:function(e,t){return 200!=e.status&&(void 0!==typeof lc.http.rest.statusHandlers[e.status]?lc.async.Callback.callListeners(lc.http.rest.statusHandlers[e.status],[e,t]):t.error(e.status+" ("+e.statusText+")"),!0)},_method:function(e,t,n,u){u||(u=lc.http.rest.defaultFormat);var s=new lc.async.Future,r=lc.http.request(e,t);r.setRequestHeader("Accept",lc.http.rest.formats[u].mime);var a=n?lc.http.rest.formats[u].toString(n):null;return a&&r.setRequestHeader("Content-Type",lc.http.rest.formats[u].mime),lc.log.trace("lc.http.rest")&&lc.log.trace("lc.http.rest",e+" "+t+" ("+u+")"),r.send(a),lc.http.rest._waitResponse(r,u,s),s},_waitResponse:function(e,n,u){e.future.onerror(u).onsuccess(function(e){if(!lc.http.rest.handleResponseStatus(e,u))try{var t=lc.http.rest.formats[n].fromString(e.responseText);u.success(t)}catch(e){u.error(e)}})}}),lc.core.createClass("lc.layout.Handler",function(e){(e._lc_layout_handler=this)._listeners=[],this._refreshValues(e)},{_refreshValues:function(e){this._clientWidth=e.clientWidth,this._clientHeight=e.clientHeight,this._offsetWidth=e.offsetWidth,this._offsetHeight=e.offsetHeight,this._scrollWidth=e.scrollWidth,this._scrollHeight=e.scrollHeight},_check:function(e){e.clientWidth==this._clientWidth&&e.clientHeight==this._clientHeight&&e.offsetWidth==this._offsetWidth&&e.offsetHeight==this._offsetHeight&&e.scrollWidth==this._scrollWidth&&e.scrollHeight==this._scrollHeight||(lc.async.Callback.callListeners(this._listeners),this._refreshValues(e))}}),lc.layout.onChange=function(e,t){e._lc_layout_handler||new lc.layout.Handler(e),e._lc_layout_handler._listeners.push(t)},lc.layout.triggerChange=function(e){e._lc_layout_handler&&e._lc_layout_handler._check(e);for(var t=0;t<e.childNodes.length;++t)1==e.childNodes[t].nodeType&&lc.layout.triggerChange(e.childNodes[t])},window.addEventListener("resize",function(){lc.layout.triggerChange(document.body)}),lc.layout.getAbsolutePosition=function(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e.offsetParent!=document.body;)e=e.offsetParent,t.x-=e.scrollLeft,t.y-=e.scrollTop,t.x+=e.offsetLeft,t.y+=e.offsetTop;return t},lc.core.namespace("lc.locale",{_userLanguages:[],_lang:void 0,_namespaces:[],_listeners:[],_localized:[],setLanguage:function(e){if(-1!=(t=lc.locale._userLanguages.indexOf(e))){if(lc.locale._lang!=e){lc.locale._lang=e,window.localStorage?window.localStorage.setItem("lc.locale",e):lc.cookies.set("lc.locale",e,"/",31536e3),lc.log.debug("lc.locale","language set to: "+e);for(var t=0;t<lc.locale._namespaces.length;++t)lc.locale._namespaces[t].reload();lc.async.Callback.callListeners(lc.locale._listeners,[e]);for(t=0;t<lc.locale._localized.length;++t)this._updateLocalized(lc.locale._localized[t])}}else lc.log.debug("lc.locale","setLanguage ignored for unknown language: "+e)},getLanguage:function(){return lc.locale._lang},declare:function(e,t,n){Array.isArray(t)||(t=[t]);for(var u=0;u<t.length;++u)if(lc.locale.hasNamespace(t[u]))lc.log.warn("lc.locale","Locale namespace "+t[u]+" is already defined");else{var s=new lc.locale.Namespace(t[u],e,n);lc.locale._namespaces.push(s),lc.log.debug("lc.locale","Locale namespace "+s.name+" declared at "+e)}},loadDeclarations:function(u){var s=new lc.async.Future;return lc.http.rest.get(u).onerror(s).onsuccess(function(e){try{for(var t=0;t<e.namespaces.length;++t){var n=e.namespaces[t];"string"==typeof n?lc.locale.declare(u+"/",n,null):lc.locale.declare(u+"/",n.name,n.languages)}s.success()}catch(e){s.error(e)}}),s},hasNamespace:function(e){return null!=lc.locale.getNamespace(e)},getNamespace:function(e){for(var t=0;t<lc.locale._namespaces.length;++t)if(lc.locale._namespaces[t].name==e)return lc.locale._namespaces[t]},getFullyAvailableLanguages:function(){for(var e=null,t=new lc.async.JoinPoint,n=new lc.async.Future,u=0;u<lc.locale._namespaces.length;++u){var s=lc.locale._namespaces[u];if(Array.isArray(s.languages))if(null==e)e=s.languages.slice();else for(var r=0;r<e.length;++r)s.languages.indexOf(e[r])<0&&(e.splice(r,1),r--);else t.addToJoin(1),s.languages.onsuccess(new lc.async.Callback(s,function(){if(null==e)e=this.languages.slice();else for(;r<e.length;++r)this.languages.indexOf(e[r])<0&&(e.splice(r,1),r--);t.join()}))}return t.start(),t.onsuccess(function(){null===e&&(e=[]),n.success(e)}),n},getPreferredLanguageAmong:function(e){for(var t=0;t<lc.locale._userLanguages.length;++t)if(0<=e.indexOf(lc.locale._userLanguages[t]))return lc.locale._userLanguages[t];return null},listenLanguage:function(e){this._listeners.push(e),this._lang&&lc.async.Callback.callListeners(e,[this._lang])},unlistenLanguage:function(e){this._listeners.remove(e)},localizeAttribute:function(e,t,n,u,s){var r={namespace:n,key:u,params:s,element:e,attributeName:t,localize:function(e){this.element[t]=e}};this._localized.push(r),this._lang&&this._updateLocalized(r),lc.events.listen(e,"destroy",function(){lc.locale._localized.remove(r)})},textNode:function(e,t,n){var u=document.createTextNode("");return lc.locale.localizeAttribute(u,"nodeValue",e,t,n),u},_updateLocalized:function(e){var t=lc.locale.getNamespace(e.namespace);t?t.getStringAsync(e.key,e.params).onsuccess(new lc.async.Callback(e,function(e){this.localize(e)})):e.localize("[unknown namespace '"+e.namespace+"']")}}),lc.core.createClass("lc.locale.Namespace",function(e,t,n){"/"!=t.charAt(t.length-1)&&(t+="/"),this.name=e,this.url=t+e,this._content=void 0,n?(this.languages=n,lc.locale._lang&&this.reload()):this.languages=lc.http.get(this.url+".languages").onsuccess(new lc.async.Callback(this,function(e){lc.log.debug("lc.locale","Languages loaded for namespace "+this.name);for(var t=e.split(","),n=[],u=0;u<t.length;++u){var s=t[u].trim();0<s.length&&n.push(s)}this.languages=n,lc.locale._lang&&this.reload()}))},{reload:function(){this._content=lc.http.get(this.url+"."+lc.locale._lang).onsuccess(new lc.async.Callback(this,function(e){this._content=this._parse(e),lc.log.debug("lc.locale","Namespace "+this.name+" loaded for language "+lc.locale._lang+": "+this._content.length+" localized strings")}))},getStringAsync:function(e,t){var n=new lc.async.Future;return Array.isArray(this.languages)?this._getStringAsync(n,e,t):this.languages.onsuccess(new lc.async.Callback(this,function(){this._getStringAsync(n,e,t)})),n},_getStringAsync:function(e,t,n){Array.isArray(this._content)?this._getStringAsync2(e,t,n):this._content.onsuccess(new lc.async.Callback(this,function(){this._getStringAsync2(e,t,n)}))},_getStringAsync2:function(e,t,n){e.success(this.getStringSync(t,n))},getStringSync:function(e,t){for(var n=e.toLowerCase(),u=0;u<this._content.length;++u)if(this._content[u].key==n)return this._resolve(e,this._content[u].value,t);return"[unknown locale key '"+e+"' in namespace '"+this.name+"']"},_resolve:function(e,t,n){return t},_parse:function(e){for(var t=e.split(/\n/g),n=[],u=0;u<t.length;++u){var s=t[u].trim();if(0!=s.length&&!s.startsWith("#")){var r=s.indexOf("=");r<0?lc.log.warn("lc.locale","Invalid locale line "+(u+1)+" in namespace "+this.name+": no '='"):n.push({key:s.substring(0,r).trim().toLowerCase(),value:s.substring(r+1).trim()})}}return n}}),function(){var e;window.localStorage&&((e=window.localStorage.getItem("lc.locale"))&&!lc.locale._userLanguages.contains(e)&&lc.locale._userLanguages.push(e));(e=lc.cookies.get("lc.locale"))&&!lc.locale._userLanguages.contains(e)&&lc.locale._userLanguages.push(e);for(var t=navigator.languages?navigator.languages:navigator.language?[navigator.language]:navigator.userLanguage?[navigator.userLanguage]:["en"],n=0;n<t.length;++n)lc.locale._userLanguages.contains(t[n])||lc.locale._userLanguages.push(t[n]);lc.locale._userLanguages.contains("en")||lc.locale._userLanguages.push("en")}(),lc.app.onLoaded(function(){lc.locale._lang||lc.locale.getFullyAvailableLanguages().onsuccess(function(e){var t=lc.locale.getPreferredLanguageAmong(e);t&&lc.locale.setLanguage(t)})}),lc.app.onDefined(["lc.html.processor","lc.locale"],function(){lc.html.processor.addPreProcessor(function(e,t,n){if(1==e.nodeType&&"LC-LOCALE"==e.nodeName){var u=e.getAttribute("namespace"),s=e.getAttribute("key"),r=lc.locale.textNode(u,s);return e.parentNode.insertBefore(document.createComment("lc-locale namespace="+u+" key="+s),e),e.parentNode.insertBefore(r,e),lc.html.remove(e),void t.stop()}},10)}),lc.core.namespace("lc.log",{Levels:{TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4},formatters:{_registry:{},register:function(e,t){lc.log.formatters._registry[e]=t},create:function(e,t){if(void 0===lc.log.formatters._registry[e])throw"Unknown log formatter: "+e;return new Function("argument","return new "+lc.log.formatters._registry[e]+"(argument)")(t)}},_formatComponents:[],_defaultLevel:2,_loggerLevel:{},setFormat:function(e){for(var t=[],n=0;n<e.length;){var u=e.indexOf("${",n);if(0<=u){var s=e.indexOf("}",u+2);if(0<s){n<u&&t.push(new lc.log.formatters.String(e.substring(n,u))),n=s+1;var r=e.substring(u+2,s),a=null;0<(u=r.indexOf(":"))&&(a=r.substring(u+1),r=r.substring(0,u)),t.push(lc.log.formatters.create(r,a));continue}}t.push(new lc.log.formatters.String(e.substring(n)));break}lc.log._formatComponents=t},setDefaultLevel:function(e){lc.log._defaultLevel=e},setLevel:function(e,t){"string"!=typeof e&&(e=lc.core.typeOf(e)),lc.log._loggerLevel[e]=t},log:function(e,t,n,u){if(u&&u.stack?n=n+"\r\n"+u.stack:n&&n.stack&&(n=n+"\r\n"+n.stack),e){if("string"!=typeof e&&(e=lc.core.typeOf(e)),void 0===lc.log._loggerLevel[e]){if(t<lc.log._defaultLevel)return!1}else if(t<lc.log._loggerLevel[e])return!1}else if(t<lc.log._defaultLevel)return!1;if(!n)return!0;for(var s="",r=0;r<lc.log._formatComponents.length;++r)s+=lc.log._formatComponents[r].format(e,t,n);t==lc.log.Levels.ERROR?console.error(s):t==lc.log.Levels.WARN?console.warn(s):t==lc.log.Levels.INFO?console.info(s):t==lc.log.Levels.DEBUG?console.debug(s):console.log(s)},trace:function(e,t,n){return lc.log.log(e,lc.log.Levels.TRACE,t,n)},debug:function(e,t,n){return lc.log.log(e,lc.log.Levels.DEBUG,t,n)},info:function(e,t,n){return lc.log.log(e,lc.log.Levels.INFO,t,n)},warn:function(e,t,n){return lc.log.log(e,lc.log.Levels.WARN,t,n)},error:function(e,t,n){return lc.log.log(e,lc.log.Levels.ERROR,t,n)},fitStringSize:function(e,t){if(0<t){if(e.length>t){var n=Math.floor((t-3)/2);e=e.substring(0,n)+"..."+e.substring(e.length-(t-3-n))}for(;e.length<t;)e+=" "}return e}}),lc.core.createClass("lc.log.formatters.Formatter",function(){},{format:function(e,t,n){throw"Method lc.log.formatters.Formatter.format(logger, level, message) must be implemented on "+lc.core.typeOf(this)}}),lc.core.extendClass("lc.log.formatters.String",lc.log.formatters.Formatter,function(e){this.string=e},{format:function(e,t,n){return this.string}}),lc.core.extendClass("lc.log.formatters.Time",lc.log.formatters.Formatter,function(){},{format:function(e,t,n){var u=new Date;return(""+u.getFullYear()).padStart(4,"0")+"-"+(""+(u.getMonth()+1)).padStart(2,"0")+"-"+(""+u.getDate()).padStart(2,"0")+" "+(""+u.getHours()).padStart(2,"0")+":"+(""+u.getMinutes()).padStart(2,"0")+":"+(""+u.getSeconds()).padStart(2,"0")+"."+(""+u.getMilliseconds()).padStart(3,"0")}}),lc.log.formatters.register("time","lc.log.formatters.Time"),lc.core.extendClass("lc.log.formatters.DateTime",lc.log.formatters.Formatter,function(){},{format:function(e,t,n){return(new Date).toLocaleString()}}),lc.log.formatters.register("datetime","lc.log.formatters.DateTime"),lc.core.extendClass("lc.log.formatters.Level",lc.log.formatters.Formatter,function(e){e=parseInt(e),this.size=e<=0?5:e},{format:function(e,t,n){var u="";for(var s in lc.log.Levels)if(lc.log.Levels[s]==t){u=s;break}return lc.log.fitStringSize(u,this.size)}}),lc.log.formatters.register("level","lc.log.formatters.Level"),lc.core.extendClass("lc.log.formatters.Logger",lc.log.formatters.Formatter,function(e){e=parseInt(e),this.size=e},{format:function(e,t,n){return lc.log.fitStringSize(e,this.size)}}),lc.log.formatters.register("logger","lc.log.formatters.Logger"),lc.core.extendClass("lc.log.formatters.Message",lc.log.formatters.Formatter,function(e){e=parseInt(e),this.size=e},{format:function(e,t,n){return lc.log.fitStringSize(""+n,this.size)}}),lc.log.formatters.register("message","lc.log.formatters.Message"),lc.log.setFormat("${time} ${level} ${logger:20} ${message}"),lc.app.onDefined(["lc.resources","lc.Cache"],function(){lc.resources._css_cache=new lc.Cache,lc.resources.css=function(e){var t=e instanceof lc.URL?e:new lc.URL(e),n=t.toString(),u=lc.resources._css_cache.get(n);if(u)return u.future;var s=document.createElement("LINK");return s.rel="stylesheet",s.type="text/css",u={url:t,element:s,future:new lc.async.Future},lc.resources._css_cache.set(n,u),lc.app.pending(u.future),s.onload=function(){lc.log.debug("lc.resources","CSS loaded: "+n),u.future.success(s)},s.onerror=function(){lc.log.error("lc.resources","Error loading CSS "+n),js.future.error("CSS loading error")},s.href=n,document.getElementsByTagName("HEAD")[0].appendChild(s),u.future}}),lc.app.onDefined(["lc.resources","lc.Cache"],function(){lc.resources._html_cache=new lc.Cache(9e5),lc.resources.html=function(e){var t=e instanceof lc.URL?e:new lc.URL(e),n=t.toString(),u=lc.resources._html_cache.get(n);return u||(u={url:t,html:null,future:new lc.async.Future},lc.resources._html_cache.set(n,u),lc.http.get(n).onsuccess(function(e){u.html=e,u.future.success(e)}).onerror(function(e){u.html="<div>"+e+"</div>",u.future.success(u.html)})),u.future},lc.resources.htm=lc.resources.html}),lc.app.onDefined(["lc.resources","lc.Cache"],function(){lc.resources._js_cache=new lc.Cache,lc.resources.js=function(e){var t=e instanceof lc.URL?e:new lc.URL(e),n=t.toString(),u=lc.resources._js_cache.get(n);if(u)return u.future;var s=document.createElement("SCRIPT");return u={url:t,element:s,future:new lc.async.Future},lc.resources._js_cache.set(n,u),lc.app.pending(u.future),s.type="text/javascript",s.onload=function(){lc.log.debug("lc.resources","Javascript loaded: "+n),lc.app.newDefinitionsAvailable(),u.future.success(s)},s.onerror=function(){lc.log.error("lc.resources","Error loading javascript "+n),u.future.error("Javascript loading error")},s.src=n,document.getElementsByTagName("HEAD")[0].appendChild(s),u.future},lc.resources.javascript=lc.resources.js}),lc.core.namespace("lc.resources",{load:function(e,t){var n=e instanceof lc.URL?e:new lc.URL(e);if(!t){var u=n.path.lastIndexOf(".");if(u<0){lc.log.error("lc.resources","Unable to load a resource without an extension: "+n.toString());var s=new lc.async.Future;return s.error("Unable to load a resource without an extension: "+n.toString()),s}t=n.path.substring(u+1)}return void 0===lc.resources[t]&&(t="unknownType"),lc.resources[t](n)},loadInSequence:function(t,n){var u=new lc.async.Future,s=function(e){e!=t.length?lc.resources.load(t[e],n).onsuccess(new lc.async.Callback(this,s,[e+1])).onerror(u):u.success(null)};return s(0),u},loadInParallel:function(e,t){for(var n=new lc.async.JoinPoint,u=0;u<e.length;++u)n.addToJoin(lc.resources.load(e[u],t));return n.start(),n},_default_cache:null,unknownType:function(e){lc.resources._default_cache||(lc.resources._default_cache=new lc.Cache(6e5));var t=e instanceof lc.URL?e.toString():e,n=lc.resources._default_cache.get(t);if(n)return n.future;var u=lc.http.get(e);return n={future:u},lc.resources._default_cache.set(t,n),u}}),lc.core.createClass("lc.URL",function(e,t){if(e instanceof lc.URL||void 0!==e.protocol)return this.protocol=e.protocol,this.host=e.host,this.port=e.port,this.path=e.path,this.hash=e.hash,void(this.params=lc.core.copy(e.params));"function"==typeof e.toString&&(e=e.toString());var n=e.indexOf("://");if(0<n)this.protocol=e.substr(0,n).toLowerCase(),n=(e=e.substr(n+3)).indexOf("/"),this.host=e.substr(0,n),e=e.substr(n),0<(n=this.host.indexOf(":"))?(this.port=this.host.substr(n+1),this.host=this.host.substr(0,n)):this.port=null;else if(window&&!t?(this.protocol=window.location.protocol.substr(0,window.location.protocol.length-1),this.host=window.location.hostname,this.port=window.location.port):(this.protocol="",this.host="",this.port=""),!e.startsWith("/")&&!t){var u;if(document.baseURI)u=new lc.URL(document.baseURI);else{var s=document.getElementsByTagName("base");u=0<s.length?new lc.URL(s[0].href):new lc.URL(location.toString())}(n=(u=u.path).lastIndexOf("/"))<u.length-1&&(u=u.substring(0,n+1)),e=u+e}if(0<(n=e.indexOf("#"))&&(this.hash=e.substr(n+1),e=e.substr(0,n)),n=e.indexOf("?"),this.params=new Object,0<n){for(this.path=e.substr(0,n),e=e.substr(n+1);0<e.length&&0<=(n=e.indexOf("&"));){var r=e.substr(0,n);e=e.substr(n+1),0<(n=r.indexOf("="))?this.params[lc.URL.decode(r.substr(0,n))]=lc.URL.decode(r.substr(n+1)):this.params[lc.URL.decode(r)]=""}0<e.length&&(0<(n=e.indexOf("="))?this.params[lc.URL.decode(e.substr(0,n))]=lc.URL.decode(e.substr(n+1)):this.params[lc.URL.decode(e)]="")}else this.path=e;if(!t)for("/"!=this.path.substr(0,1)&&window.location.pathname&&(n=(e=window.location.pathname).lastIndexOf("/"),e=e.substr(0,n+1),this.path=e+this.path);0<(n=this.path.indexOf("/../"));){var a=this.path.substr(0,n).lastIndexOf("/");if(a<0)break;this.path=this.path.substr(0,a+1)+this.path.substr(n+4)}this.host=this.host.toLowerCase(),this.path=this.path.toLowerCase()},{protocol:null,host:null,port:null,path:null,hash:null,params:null,toString:function(){var e;this.protocol?(e=this.protocol+"://"+this.host,this.port&&(e+=":"+this.port)):e="",e+=this.path;var t=!0;for(var n in this.params)t?(e+="?",t=!1):e+="&",e+=encodeURIComponent(n)+"="+encodeURIComponent(this.params[n]);return this.hash&&(e+="#"+this.hash),e},equals:function(e){if(!this.equalsWithoutParameters(e))return!1;for(var t in this.params)if(e.params[t]!=this.params[t])return!1;for(var t in e.params)if(e.params[t]!=this.params[t])return!1;return!0},equalsWithoutParameters:function(e){return this.protocol==e.protocol&&(this.host==e.host&&(this.port==e.port&&this.path==e.path))},isRelative:function(){return!this.path.startsWith("/")},applyRelative:function(e){var t=new lc.URL(this);if(!t.path.endsWith("/")){var n=t.path.lastIndexOf("/");t.path=t.path.substring(0,n+1)}for(t.path+=e.path,t.params=lc.core.copy(e.params),t.hash=e.hash;0<(n=t.path.indexOf("/../"));){var u=t.path.substr(0,n).lastIndexOf("/");if(u<0)break;t.path=t.path.substr(0,u+1)+t.path.substr(n+4)}return t}}),lc.URL.decode=function(e){return decodeURIComponent(e).replace(/\+/g," ")},lc.core.namespace("lc.xml",{getChildElementsByName:function(e,t){t=t.toUpperCase();for(var n=[],u=0;u<e.childNodes.length;++u)1==e.childNodes[u].nodeType&&e.childNodes[u].nodeName==t&&n.push(e.childNodes[u]);return n},getChildByName:function(e,t){t=t.toUpperCase();for(var n=0;n<e.childNodes.length;++n)if(1==e.childNodes[n].nodeType&&e.childNodes[n].nodeName==t)return e.childNodes[n];return null},isAncestorOf:function(e,t){if(e===t)return!1;for(;t.parentNode&&t.parentNode!=t;){if(e===t.parentNode)return!0;t=t.parentNode}return!1}}),lc.app.onLoaded(function(){lc.log.trace("lc.html.processor","Processing body at application startup"),lc.html.processor.process(document.body,function(){lc.layout.triggerChange(document.body)})}),lc.core._loaded=!0,lc.app.newDefinitionsAvailable();
//# sourceMappingURL=lc-core.min.js.map